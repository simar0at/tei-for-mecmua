<body>

<!-- insert this para following 22nd <p> #PHFAX -->
<p xml:id="GEN1">
If, as is more often the case, a transcription of the zone identified
in this way is to be included in the encoded document, this may be
done in two ways. If the transcription is regarded as a text in its
own right, organized and structured independently of its physical
realization in the document or documents represented by the facsimile,
then the recommended practice is to use the traditional <gi>text</gi>
element, provided as a sibling of the <gi>facsimile</gi> element. This
approach is illustrated in the brief example following. Alternatively,
if the transcription is intended to do no more than represent the
physicality of the document itself, it may be preferable to use the
elements <gi>patch</gi>, <gi>line</gi>, and <gi>ab</gi>, embedded
within the <gi>zone</gi> element, as further described in section <ptr
target="#PHZLAB"/> below.</p>

<!-- then add new section combining the Bovelles example with the
following -->

<div xml:id="PHZLAB"><head>Embedded transcription</head>
<p>An <term>embedded transcription</term> is one in which words
and other written traces are encoded as subcomponents of elements
representing the physical surfaces carrying them rather than
independently of them. </p>
<p>The following elements are provided for this purpose:
<specList>
<specDesc key="surface"/>
<specDesc key="zone"/>
<specDesc key="patch" atts="binder type height width"/>
<specDesc key="line" />
<specDesc key="ab" atts="type"/>
</specList>
</p>
<p>The elements <gi>surface</gi> and <gi>zone</gi> were introduced above, in section <ptr
            target="#PHFAX"/>. The element <gi>patch</gi> is useful in cases where the written
         surfaces constituting a document are not homogeneous. In the following example, taken from
         the Walt Whitman archive, two pieces of newsprint have been glued to a piece of blue paper
         on which a poem is being drafted: <figure>
            <graphic url="examples/whitman01.jpg" width="400px"/>
            <head rend="it">Image from
               http://www.whitmanarchive.org/resources/sleepers/duk.00258.001.jpg</head>
         </figure>  The two pieces of newsprint might perhaps be regarded as special kinds of zone,
         but they are effectively new surfaces, since they might contain additional written zones
         themselves (such as the numbers in this case). We therefore propose a distinct element,
            <gi>patch</gi>, which can appear within a <gi>surface</gi>, and behaves effectively like
         one, except that it contains specialized attributes to provide additional information.</p>

<p>Most writing is linear, in the sense that it is composed of
discrete tokens organized physically into groups, typically organized
in a sequence corresponding with the way they are intended to be
read. Depending on the directionality of the writing system used,
this might be any combination of top-down and left to right, or vice
versa. It thus seems convenient to introduce a unit <gi>line</gi> to
hold a complete group of such tokens. Where, however, the lineation is
not considered useful or significant, groups of tokens may be
indicated using the neutral <gi>ab</gi> (anonymous block) element
described in section     <ptr target="#SASE"/>
</p>
<p>Using these elements, the Whitman draft above might be encoded as
follows: <!-- whitman01.xml --><egXML
xmlns="http://www.tei-c.org/ns/Examples">
                     <surface>
                        <zone>
                           <line>Poem</line>
                           <line>As in Visions of — at</line>
                           <line>night —</line>
                           <line>All sorts of fancies running through</line>
                           <line>the head</line>
                        </zone>
                        <patch type="newsprint" binder="glue"
			       height="40" width="90"> 
			  <ab>Spring has
                           just set in here, and the weather.... a
			   steamer </ab>
                              <metaMark function="sequence">2</metaMark>
                        </patch>
                        <patch type="newsprint" binder="glue"
			       height="35" width="90"> 
			  <ab>"The shores on either side of the Sound are... The In-                            </ab>   
			   <metaMark function="sequence">3</metaMark>
                        </patch>
                     </surface>
                  </egXML> The <gi>metaMark</gi> element used in this example is further
                  discussed below (<ptr target="#mm"/>)</p>
<p>Note that in this example we have not included any <gi>graphic</gi> element
corresponding with the <gi>zone</gi> or <gi>surface</gi> elements 
identified in the transcription. The encoder may choose to combine
graphics with the transcription at whatever level is considered
effective, or not at all. Equally, the encoder may choose to provide
only graphics without transcription, or with a structured
(non-embedded) transcription, or any combination of the three. </p>
</div>

<!-- insert this before PHST -->
<div xml:id="PH-summ"><head>Transcribing the process</head>

<p>The elements described in this chapter may also be used for digital
transcriptions in which the object is not to represent a finished
text, but rather to represent the creative process, as evidenced by
different <q>layers</q> or <q>traces</q> of writing in one or more
documents. Such transcriptions are closely focussed on the physical
appearance of specific documents, needing to distinguish the traces of
different writing activities on them, such as additions,
and deletions but also other indications of how the writing is to be
read, such as indications of transposition, re-affirmation of writing
which has been deleted, and so on.  Such distinctions are considered of
particular importance when dealing with authorial manuscripts, but are
also relevant in the case of historical sources such as charters or
other legal documents.</p>

<p>To encode such transcriptions, we propose a simple model in which
writing traces are marked with an appropriate tag such as
<gi>mod</gi>, <gi>del</gi>, etc. to indicate their function in the
document, as described in the remainder of this chapter. Each such
element can be assigned to one or more editorially-defined
modification groups, termed a <term>layer</term>, by means of a global
<att>layer</att> attribute, which references a definition for the
layer concerned, typically provided within the TEI Header
<gi>creation</gi> element; see further <ptr target="#PH-layers"/>. The
transcription itself is provided within a <gi>facsimile</gi> element,
using the elements <gi>surface</gi> and <gi>zone</gi> described in
section <ptr target="#PHFAX"/>. Within a <gi>zone</gi>, the
transcription may be organized in terms of lines of writing, using the
<gi>line</gi> element, or in terms of blocks of writing, using the
<gi>ab</gi> (anonymous block) element, or as a combination of the two;
see further <ptr target="#PH-ZLAB"/>.
</p>
</div>

<!-- insert following as new subsections of PHST -->

<div xml:id="alterations">
   <head>Marking up the writing process</head>
   <p>Modifications of various kinds (correction, addition, deletion,
   etc.) are frequently found within a single document, and may also
   be inferred when different documents are compared, although it may be
   an open question as to whether inter-document discrepancies at the
   dossier level should be regarded in the same way as intra-document
   alterations. When two witnesses are collated, we may observe that a
   word present in one is missing from the other: this does not necessarily
   imply that the word was added to the first witness, nor that it
   was deleted from the other. 
   </p>

<p>In this section we discuss a number of elements which may be used to 
record traces of the writing process within a document. 
</p>


<div><head>Generic modification</head>

<specList>
         <specDesc key="mod" atts="rend type spanTo"/>
</specList>


   <p>Most of these elements imply a certain level of semantic
   interpretation. For instance, using the <gi>add</gi> element to
   encode interlinear insertions implies a decision that the
   interlinear text has been deliberately inserted rather than simply
   written between the lines.  Where it is felt desirable to keep the
   recording of <soCalled>what is on the page</soCalled> entirely
   separate from <soCalled>what is the editor’s
   interpretation</soCalled>, the generic <gi>mod</gi> element may be
   preferred. This element simply indicates any kind of modification
   that has been identified in the document, without prejudice as to
   its function. Occurrences of the <gi>mod</gi> element may be
   categorised by means of their <att>type</att> attribute, and visual
   aspects of their appearance can be described by means of the
   <att>rend</att> attribute, but they provide no further
   interpretation of the function or intention of the passage so
   marked up. The <att>spanTo</att> may be used to indicate the end of
   a modified passage if this extends across the boundaries of some
   other XML element, for example from the middle of one line tagged
   as a <gi>line</gi> to the middle of another <gi>line</gi> some
   distance further on in the document. </p>
<!-- example needed -->
</div>

   <div xml:id="mm">
      <head>Metamarks</head>
      <p>By <term>metamark</term> we mean marks such as
      numbers, arrows, crosses, or other symbols introduced by the
      writer into a document expressly for the purpose of indicating
      how the text is to be read. Such marks thus constitute a kind of
      markup of the document, rather than forming part of the
      text.
 <specList>         
<specDesc key="metaMark" atts="function target spanTo"/>
</specList>
</p>      
<p>Unlike marginal notes or other additions to the text, meta-marks
are used to indicate a deliberate alteration of the writing itself,
such as <q>move this passage over there</q>. An addition or annotation
by contrast would typically concern some property of the passage other
than its intended location or status within the text flow.  A metamark
may however contain text, or some other graphic which the encoder
wishes to preserve, or it may simply consist of arrows, dots, lines
etc. </p>

<p>The <gi>metaMark</gi> element carries a <att>function</att>
attribute which specifies the function of the meta-mark, using values
such as "reorder flag delete insert used". The passage to which the
metamark applies may be indicated in either of two ways: either the
<att>target</att> attribute may be used to  point to the element or elements
concerned, or the <att>spanTo</att> element may be used to point to a
position in the document at which the passage concerned finishes. Both
attributes should not be supplied. </p>
      
<p>The following example is taken from <title>Kundige bok 2</title>, a
15th century legal book from the city of Göttingen, containing
regulations of everyday life issued by the city council <figure>
<graphic url="examples/ka04_1v-dtl.jpg" width="400px"/>
<head>Malte's example</head>
         </figure>
      </p>
      
<p>In the second paragraph, the sentence beginning <q>Ock en schullen
de bruwere...</q> was first written along with the word <mentioned
xml:lang="lat">lege</mentioned> ("read") in the left hand margin,
functioning as a metamark to indicate that this sentence forms part of
the regulations. A further sentence was then added, while at some
later stage the text and also the metamark were deleted. We
might encode this as follows: <!-- ka04_1v-dtl.xml --><egXML
xmlns="http://www.tei-c.org/ns/Examples">
<del layer="#L3">
   <metaMark function="flag" target="#s1" layer="#L2">lege</metaMark>
   <s xml:id="s1" layer="#L1">Ock en schullen de bruwere des hilgen dages nicht over
      <lb/>setten noch uppe den stillen fridach bruwen.</s>
   <add layer="#L2">
      <s>Noch nymande <lb/>over setten, se en sehin denne erst, dat uppe den
         bonen <lb/>neyn stro noch, huw noch flaß ligghe, by pine eyner
         halven <lb/>roden, deme bruwere so wol alse dem bruwheren to
         murende.</s>
   </add>
</del>
         </egXML>
      </p>
<p>The <att>layer</att> attribute used here to indicate the sequencing
of these various interventions is discussed below, in section <ptr
target="#PH-layers"/>.</p>
      <p>The  <gi>metaMark</gi> element may also be used to encode the
      symbols etc. often found in  marked-up proofs such as
         the following, taken from the Walt Whitman archive: 
         <figure>
<graphic url="examples/loc.00295.jpg" width="400px"/>
<head>http://www.whitmanarchive.org/resources/sleepers/</head>
         </figure></p>
<p>In this example, the whole of what was originally the 14th section
has been marked for deletion, both by horizontal and vertical lines,
and by the metamarks resembling the <q>delta</q> deletion symbol to
left and right of the section. This might be encoded more economically
by using the normal <gi>del</gi> or <gi>delSpan</gi> element. However,
it may also be useful to distinguish cases like this from cases the
writer does not intend to suppress the content, but only to mark that
it has been transferred or reused. An appropriate value (such as
<val>used</val>) should be provided for the <att>function</att>
attribute in the latter case. 
   </p>   <p>The following page from the Walt Whitman archive has been crossed through to
         indicate used material: <figure>
<graphic url="examples/whitman02.jpg" width="400px"/>
<head>Page from
   http://www.whitmanarchive.org/resources/sleepers/20051105_0650.jpg</head>
         </figure> 
This page contains many internal deletions, but these should be
distinguished from the <soCalled>deletion</soCalled> signalled by the large
cross, which actually shows that the page has been transferred or re-used, not
deleted. </p>
<egXML
      xmlns="http://www.tei-c.org/ns/Examples">
<surface>
   <metamark function="used" rend="cross" spanTo="#X2"/>
   <zone>
      <line rend="underline">The Poet</line>
      <line><del rend="strikethrough">I think</del> His sight is
         the</line>
      <line> sight of the ? and</line>
      <line>has sent the instinct of the</line>
      <line>? dog</line>
   </zone>
   <zone>
      <line>I think <retrace>ten</retrace> million</line>
      <!-- ... -->
      <line>well; those <subst>
<del rend="strikethrough">supple-fingered gods</del>
<add>journeymen divine.</add>
         </subst></line>
      <anchor xml:id="X2"/>
   </zone>
</surface>
         </egXML>
   </div>

<div><head>Fixation and clarification</head>

<p>A writer may sometimes rewrite material a second time without
significant change and in the same place. We consider this a distinct
activity from addition as usually defined because no new textual
material results but the status of existing material changes. We may
distinguish two variants of this: <term>fixation</term> where the
first version was a tentative draft which is subsequently fixed, for
example by inking it over; and <term>clarification</term>, where the
first version was badly written and has been rewritten for
clarity. The element <gi>retrace</gi> is provided for both cases; its
<att>cause</att> attribute may be used to distinguish them. </p>
<p><specList>
         <specDesc key="retrace" atts="cause"/>
      </specList></p>

      <p>In this simple example, taken from the papers of Henrik
      Ibsen, the writer wrote the word <mentioned>skuldren</mentioned>
      hastily, and then returned to it to make the letter
      <mentioned>l</mentioned> larger and clearer: <figure>
<graphic url="examples/skuldren.jpg" width="400px"/>
<head rend="it">Image from a ms of Peer Gynt, Collin 2869, 4°, I.1.1, the
   Royal Library of Copenhagen</head>
         </figure> We might transcribe this word as follows: <!-- skuldren.xml --><egXML
xmlns="http://www.tei-c.org/ns/Examples">
<line>... Sku<retrace cause="unclear">l</retrace>dren </line>
         </egXML>
      </p>
      <p>A single rewrite may not be sufficient, and it may be that
      the document becomes almost unreadable as a result of repeated
      clarification. In the following example, we can distinguish at
      least two attempts to write the letters
      <mentioned>er</mentioned> in the word
      <mentioned>bægerklang</mentioned>: <figure>
<graphic url="examples/munch01.jpg" width="400px"/>
<head rend="it">Image from http://www.emunch.no/tei-mm-2008/ms.html </head>
         </figure> We might encode this by nesting the <gi>rewrite</gi> element as
         follows: 
<egXML xmlns="http://www.tei-c.org/ns/Examples">
<line>ved Bæg<retrace cause="unclear" layer="#stage2">
      <retrace cause="unclear" layer="#stage1">er</retrace>
   </retrace> ...</line>
         </egXML> The <att>layer</att> attribute used here is discussed further below
(<ptr target="#PH-layers"/>). </p>
      <p>The <gi>retrace</gi> element is used only for cases where
      text has been written multiple times. Metamarks and other
      markup-like strokes can also be inked over with the same purpose
      as the fixation or clarification of text passages. For instance,
      in a draft version of Goethe’s Faust, a passage was struck
      through once in pencil during one revision and then again with
      ink during a later revision, supposedly to fixate the
      deletion.</p>
      <figure>
         <graphic url="examples/faust_redo.jpg"/>
         <head rend="it">Fixation of a deletion in Goethe’s Faust</head>
      </figure>
      <p>The empty element <gi>redo</gi> element can be used to encode this process as follows:</p>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <line><redo xml:id="redo_3" hand="#g_t" target="#mod_1" cause="fix"
   /><mod xml:id="mod_1" rend="strikethrough" spanTo="#anchor_1"
   hand="#g_bl"/>Ihr hagren, triſten, krummgezog<mod rend="strikethrough"
   >nen</mod>ener Nacken</line>
         <line>Wenn ihr nur piepſet iſt die Welt ſchon matt.<anchor xml:id="anchor_1"
/></line>
      </egXML>
   </div>

  <div xml:id="undo">
      <head>Cancellation of modifications</head>
      <p>In some cases an author indicates that an alteration is itself to be altered:
         for example, a struck through passage may be restored via a dotted underlining,
         or the underlining of a passage may be deleted by a wavy line. </p>
      <!-- need a simpler example first, need to discuss relation with restore -->
      <p>The TEI provides an element <gi>restore</gi> for one specific kind of
         alteration to an alteration, namely the undoing of a deletion. We propose a
         more general element, <gi>undo</gi>. This is an empty
<gi>undo</gi> element, which points to the
			element the effect of which is being  cancelled. If
         more than one (not coherent) part of the deletion
		     is undone, more than one <gi>undo</gi> element
		     will be needed, and each part undone must be
		     given an identifier.</p>
      <p>Consider the following imaginary example : 
<figure>
      <graphic url="examples/undoing1.jpg" width="400px"/>
   </figure>
Three text layers can be identified here : 
<list type="ordered">
<item>This is just some sample text, we need a real example. </item>
<item>This is not a real example.</item>
<item>This is just some text, not a real example.</item>
         </list>
</p>
      <p>This can be encoded using empty <gi>undo</gi> elements as follows:
<egXML xmlns="http://www.tei-c.org/ns/Examples">
<line>This is <del stage="#s2" xml:id="del_1" rend="overstrike"><undo
target="#del_1" spanTo="#X02" rend="dotted" layer="#s3"/>just some
<anchor xml:id="X02"/>sample <undo target="#del_1" spanTo="#x4"
rend="dotted" layer="#s3"/>text,<anchor xml:id="x4"/> we need
</del><add layer="#s2">not </add>a real example.</line> </egXML> The
<att>target</att> attributes on <gi>undo</gi> point to the elements
representing the initial acts (the deletions) which are undone. The
<att>rend</att> attribute indicates the way this reversion is
indicated. The <att>spanTo</att> attributes points to the
<gi>anchor</gi> which marks the point in the text where this reversion
finishes.  Since two non-contiguous parts of the deletion are undone,
there are two <gi>undo</gi> elements, each with the appropriate
attribute values.  If <att>spanTo</att> is not supplied, the
<gi>undo</gi> is understood to refer to the whole of the text
contained by the element indicated by its <att>target</att>
attribute. </p>
   </div>
 
 
   <div xml:id="transpo">
      <head>Transpositions</head>
      <p>A <term>transposition</term> occurs when metamarks are used
      to indicate that passages should be moved
      to a different position using arrows, asterisks or numbers, or
      other means. By definition the result of a transposition is
      not present in the document, and should not
      therefore be encoded, if the intention is to record its actual
      state. Instead, the following elements may be used to indicate
      the intended reordering:
<specList>
<specDesc key="transposeGrp"/>
<specDesc key="transpose"/>
</specList></p>
<p>Consider for example, the
         following extract from an Ibsen manuscript <figure>
<graphic url="examples/ibsen01.jpg" width="400px"/>
<head>Extracted from
   <ref>http://www.emunch.no/tei-mm-2008/ms.html</ref></head>
         </figure>
The underlined numbers 1 and 2 here indicate that, although the word
<mentioned>bör</mentioned> precedes the word <mentioned>hör</mentioned> in
         the text, the order of the two words should be reversed. We may encode this as
         follows: 
<egXML xmlns="http://www.tei-c.org/ns/Examples">
<line><seg xml:id="ib01">bör</seg><metaMark rend="underline"
      function="transposition" target="#ib1" place="above">2.</metaMark>
   og <seg xml:id="ib02">hör</seg><metaMark rend="underline"
      function="transposition" target="#ib02" place="above"
   >1.</metaMark></line>
<transposeGrp>
   <transpose>
      <ptr target="#ib02"/>
      <ptr target="#ib01"/>
   </transpose>
</transposeGrp>
         </egXML>
      </p>
      <p>Note the use of the generic <gi>seg</gi> element to identify the sections of
         text being transposed. When (as in the following example) the whole of line is
         to be transposed, there is no need to delimit the sections concerned: <figure>
<graphic url="examples/ibsen04.jpg" width="400px"/>
<head>Extracted from
   <ref>http://www.emunch.no/tei-mm-2008/ms3.html</ref></head>
         </figure>
         <!-- ibsen04.xml --><egXML xmlns="http://www.tei-c.org/ns/Examples">
<line xml:id="ib3"><metaMark function="transposition"
      place="margin-left">2.)</metaMark> thi da er du med Himmelen i
   Pagt; — </line>
<line xml:id="ib4">
   <metaMark function="transposition" place="margin-left"
      >1.)</metaMark> da kan du Folkets Jøkelhjerter tine;</line>
<transposeGrp>
   <transpose>
      <ptr target="#ib4"/>
      <ptr target="#ib3"/>
   </transpose>
</transposeGrp>
         </egXML> When transposition is made, the whole element indicated is understood
         to be moved, not just its contents. In the above example, the metamarks are
         thus understood to be moved along with the lines to which they apply. </p>
      <p>In case the area to be transposed is overlapping with some other kind of
         markup, the generic <gi>milestone</gi> can be used instead of <gi>seg</gi> or
         any other existing elements.</p>
      <p>One or more <gi>transposeGrp</gi> elements may be supplied either embedded
         within the text or in the <gi>profileDesc</gi> of the header, depending on
         local preference. Each <gi>transposeGrp</gi> can contain one or more
<gi>transpose</gi> elements, each of which defines a single
         transposition.</p>
   </div>

   <div xml:id="alter">
      <head>Alternative Readings</head>
      <p><figure>
<graphic url="examples/moore04.png" width="400px"/>
<head>Lalla Rookh 3</head>
         </figure> 
In this example two alternative readings are provided, without either
one being prioritised or subordinated. While the author apparently
first composed the line "Alone before his native river -", at some
later point, he entertained the possibility of using the word "beside"
instead of "before." In the context of this manuscript, there is no
indication of which word the Moore favours, so the status of these
words as possible alternative readings needs to be encoded. The
evidence of the first edition of <title>Lalla Rookh</title> shows that
the word "beside" was chosen, but for the purposes of encoding this
manuscript, the facility to encode two equally-possible alternative
readings needs to be available. </p>
      <!-- moore04.xml -->
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <zone>
<line>Alone <seg type="alternative" xml:id="alt1">before</seg>
   <add place="above" type="alternative" xml:id="alt2">beside</add> his
   native river ­—</line>
<alt targets="#alt1 #alt2" mode="excl" weights="0 1"/>
         </zone>
      </egXML>
   </div>
   <div xml:id="subst">
      <head>Substitution</head>
      <p>In the current model for the TEI <gi>subst</gi> element, one or more additions
         and deletions may be combined if they are considered as representing a single
         editorial act, a substitution. Without extension, this model could not
         therefore include cases such as the following example taken from Thomas Moore's
<title>Lalla Rooke</title>
         <figure>
<graphic url="examples/moore01.png" width="400px"/>
         </figure>
</p><p> Here the word <mentioned>pondering</mentioned> is deleted, and the
         phrase <mentioned>she mus'd</mentioned> are added, while the word
<mentioned>thus</mentioned> remains unchanged. It seems appropriate to treat
         all of this as a single substitution. This would require a modification to the
         content model of <gi>subst</gi> so as to permit text along with other members
         of <ident type="class">model.pPart.transcriptional</ident>, so that this
         example could be encoded as follows: <!-- moore01.xml --><egXML
xmlns="http://www.tei-c.org/ns/Examples">
<line>While <subst><del>pondering</del> thus <add>she
   mus'd</add></subst>, her pinions fann'd</line>
         </egXML></p>
   </div>
   <div xml:id="instant">
      <head>Instant corrections</head>
      <p>The use of tags such as <gi>del</gi> and <gi>add</gi> necessarily implies that
         the modification concerned was made at some time after the original writing. An
         exception to this is where a false start or <soCalled>instant</soCalled>
         correction has been identified: the author starts to write, and then
         immediately corrects what has been written. A special mechanism is provided for
         this case: an <att>instant</att> attribute has been introduced to
<ident>att.editLike</ident>, whose datatype is
<ident>data.xTruthValue</ident> and <code>false</code> is the default value.
         When the value of <att>instant</att> is <code>true</code> this indicates that
         the addition or deletion is considered to belong to the same writing stage as
         the rest of the unmodified document, while <code>false</code> means some stage
         later than the current stage.</p>
      <p> An example of false start can be seen in the following line: <figure>
<graphic url="examples/whitman03a.jpg" width="400px"/>
<head>http://www.whitmanarchive.org/resources/sleepers/uva.00256.001.jpg</head>
         </figure> in which we can detect the following sequence of events: <list
type="ordered">
<item>The letter T is written and then immediately deleted</item>
<item>The word The is written, deleted, and replaced by the word His</item>
<item>The added word His is then deleted</item>
<item>The initial letter i of the words iron necklace is overwritten with a
   capital I</item>
         </list> To indicate that the first of these acts must have taken place before
         the others, we might encode this revision campaign as follows:
<!-- whitman03a.xml --><egXML xmlns="http://www.tei-c.org/ns/Examples">
<line><del instant="true">T</del>
   <subst>
      <del>The</del>
      <add place="above">
         <del rend="overstrike">His</del>
      </add>
   </subst>
   <subst>
      <del rend="overwritten">i</del>
      <add place="superimposed">I</add>
   </subst>ron necklace</line>
         </egXML>
      </p>
   </div>

</div>



<!-- insert following before PHTRXX -->
<div xml:id="PH-layers"><head>Layers</head>
      <p>A major purpose of genetic editing is the identification of <soCalled>revision
            campaigns</soCalled> or, more generally, <term>layers</term>. An editor may wish to
         assign a set of alterations (deletions, additions, substitutions, transpositions, etc.) or
         any other act of writing to a particular layer, to indicate both that one or more of such
         phenomena preceded or followed another and also to indicate that they are related in some
         way, for example that one is a consequence of the other. To document this we need: <list>
            <item>a system to assign phenomena to a    particular layer</item>
            <item>a way to characterize a layer, in itself and in relation to    other
               layers.</item>
         </list></p>
      <p>The existing element <gi>creation</gi> (within the TEI Header profile description) is
         defined as the appropriate location for all information relating to the genesis or
         production of a text. We modify it slightly to permit a new <gi>listLayer</gi> element
         which contains a number of <gi>layer</gi> elements, one for each identified layer: <listSpec>
            <specDesc key="listLayer" atts="ordered"/>
            <specDesc key="layer"/>
         </listSpec>
      </p>
      <p>In the following example taken from the genetic edition of Goethe’s Faust, the editor has
         identified four distinct layers:</p>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <profileDesc>
            <creation>
               <listLayer ordered="true">
                  <layer xml:id="ST-1">First stage, written in ink by a writer</layer>
                  <layer xml:id="ST-2">Second stage, written in Goethe's hand using pencil</layer>
                  <layer xml:id="ST-3">Fixation of the revised passages and further revisions by
                     Goethe using ink</layer>
                  <layer xml:id="ST-4">Addition of another stanza in a          different hand,
                     probably at a later stage</layer>
               </listLayer>
            </creation>
         </profileDesc>
      </egXML>
      <p>The <gi>listLayer</gi> element carries an attribute <att>ordered</att>, which can take the
         values <code>true</code> or <code>false</code> (the default). The attribute specifies
         whether the order of child elements signifies a temporal order for the revision campaigns
         which they document. In the Faust example above, the editor has asserted that the four
         stages distinguished are ordered chronologically according to the order of the
            <gi>layer</gi> elements. Note that asserting a specific order early on, though probably
         one of the hardest tasks in a genetic analysis, can considerably reduce the encoding effort
         in assigning textual alterations to stages during the transcription, as we will see below.
         For instance deletions can only be assigned to a stage that follows the one in which the
         passage being deleted was written down. Hence, having a certain order of stages put in
         place before transcription begins, will allow the encoder to reduce verbose tagging, where
         default assumptions based on the natural order of actions can be made.</p>
      <p>If necessary, <gi>listLayer</gi> elements can be nested hierarchically. This may be helpful
         in two cases. Firstly one can build up hypotheses about related revisions step-by-step,
         starting with stages of smaller coverage, whose members are certainly related, and then in
         a subsequent pass grouping these stages in turn, thereby extending their reach.</p>
      <!-- stages.xml -->
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <profileDesc>
            <creation>
               <listLayer>
                  <layer xml:id="o">An unrelated layer note</layer>
                  <listLayer xml:id="m" cert="low">
                     <layer xml:id="m1">Alterations on one manuscript page, certainly
                        related</layer>
                     <layer xml:id="m2">Alterations on another manuscript page, certainly
                        related</layer>
                  </listLayer>
                  <layer xml:id="p">Another unrelated layer note</layer>
               </listLayer>
            </creation>
         </profileDesc>
      </egXML>
      <p>A nested <gi>listLayer</gi> elements is also useful         to indicate a
            <emph>partial</emph> ordering of revision campaigns.</p>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <listLayer ordered="true">
            <layer xml:id="ST1">The first stage</layer>
            <listLayer>
               <!-- We have no information about the order of these layers, except
     that they both followed ST1 and prececeded STX  -->.
                  <layer xml:id="ST-rev1">A revision of the first stage</layer>
               <layer xml:id="ST-rev2">Another revision of the first          stage</layer>
            </listLayer>
            <layer xml:id="STX">The last stage</layer>
         </listLayer>
      </egXML>
      <p>In addition to the possibility of ordering text stages in relation to each other,
            <gi>layer</gi> elements may carry a number of attributes from the
            <ident>att.datable</ident> class (<att>period</att>, <att>when</att>,
            <att>notBefore</att>, <att>notAfter</att>, <att>from</att>, and <att>to</att>) which
         allow each stage to be dated as exactly or inexactly as necessary, in the same way as is
         currently possible for the TEI <gi>date</gi> element.</p>
      <!-- Maybe note that absolute dates and relative order can conflict -->
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <profileDesc>
            <creation>
               <date notAfter="1816-07-18"/>
               <listLayer ordered="true">
                  <layer xml:id="mod1" when="1816-07-16">The first draft of
                        <title>Persuasion</title> is completed by the <date>July 16    1816</date>
                     written after the word <q>Finis</q> at <ref target="#pers-30">page
                     30</ref>.</layer>
                  <layer xml:id="mod2" notBefore="1816-07-16">After the <date>16th    of July</date>
                     Austen starts revision of the two final chapters, by rewriting the end and
                     adding a new block (<ref target="#transp-1">pages 32-35</ref>) to be inserted
                     at <ref target="#insertion-p1">page 19</ref>. This stage is documented by the
                     deletion of the date (<date>July 16 1816</date>) at <ref target="#pers-30">page
                        30</ref>, and the addition of more text and of a new date    (<date>July 18.
                        1816</date>) at <ref target="#pers-31">page    31</ref></layer>
                  <layer notBefore="1816-07-18">Before publication, after <date>July    18th,
                        1816</date> chapters 10-11 were broken into three chapters, 10, 11, 12, as
                     witnessed by the print.</layer>
               </listLayer>
            </creation>
         </profileDesc>
      </egXML>
      <p>Each <gi>layer</gi> element, apart from declaring a distinct layer in the creation of the
         document, may also contain references to other annotations contained within the
            <gi>teiHeader</gi> or in the document (as shown in the previous example). Such
         references, along with the textual content are purely documentary and do not affect the
         textual stage associated with any element thus referred to. The association of a textual
         component with a layer is always made explicitly, either by pointing from the
            <gi>layer</gi> attribute <att>target</att> to one or more elements, or (for preference)
         by pointing from the element concerned to the <gi>layer</gi> element by means of its
            <att>layer</att> attribute:</p>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <line layer="#firstStage">This is a <subst layer="#secondStage">
               <del>house</del>
               <add>mouse</add>
            </subst>.</line>
      </egXML>
      <p>This simple example shows the latter of the two options: The relevant layers are declared
         in the header; then textual alterations and acts of writing are associated with. The above
         markup indicates that the whole sentence was realized in the first stage, while the
         substitution of “house” with “mouse” happened at the second stage. </p>
      <p>A more complex and complete example:</p>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <profileDesc>
            <creation>
               <listLayer type="ordered">
                  <layer xml:id="firstStage">First stage, written in ink by a writer</layer>
                  <layer xml:id="secondStage">Revised by Goethe using pencil</layer>
                  <layer xml:id="thirdStage">Fixation of the revised passages and further revisions
                     by Goethe using ink</layer>
                  <layer xml:id="fourthStage">Addition of another stanza, probably at a later
                     stage</layer>
               </listLayer>
            </creation>
         </profileDesc> [...] <div layer="#firstStage">
            <l n="11656">
               <subst>
                  <del>Ihr</del>
                  <add>
                     <rewrite layer="#thirdStage">
                        <seg layer="#secondStage">Nun</seg>
                     </rewrite>
                  </add>
               </subst> wanſtige Schuften mit den Feuerbacken</l>
            <l n="11657">Ihr glüht ſo recht vom Höllen Schwefel <subst
                  layer="#secondStage
         #thirdStage">
                  <del>ſatt</del>
                  <add>feiſt</add>
               </subst>.</l>
            <l n="11658">
               <delSpan spanTo="#anchor_delSpan_1" layer="#thirdStage"/>Ihr hagren,       triſten, krummgezog<subst>
                  <del>nen</del>
                  <add>ener</add>
               </subst> Nacken</l>
            <l>Wenn ihr nur piepſet iſt die Welt ſchon matt.<anchor xml:id="anchor_delSpan_1"/></l>
         </div>
      </egXML>
      <p>Note first, that a layer, once assigned to an element, is inherited by all descendants of
         that element unless overridden by a subsequent assignment. So in the example above the
         three verses are assigned to the first stage initially. The writing of
            <mentioned>Nun</mentioned> (as part of the substitution in the first verse) takes place
         in the second stage and is repeated or fixated in the third. Also the substitution in the
         second verse is done repeatedly: initially it takes place in the second stage, but is
         fixated as a whole in the third.</p>
      <p>The interpretation of layer assignments for a particular text passage is based on a number
         of implicit assumptions and constraints which have the effect of minimizing the amount of
         tagging necessary. The system is also flexible enough to support an explicit distinction
         between acts of writing and textual alterations, since either of these can be associated
         with layers described in the encoding. The following example shows an encoding in which the
         same passage is transcribed twice, once from a documentary perspective, and once from a
         textual one :</p>
      <!-- faust_2.xml -->
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
         <profileDesc>
            <creation>
               <listLayer type="ordered">
                  <layer target="#zone_1 #subst_3">First stage, written in ink by a scribe</layer>
                  <layer
                     target="#zone_2 #mod_1 #line_1 #line_2 #subst_1 #subst_2
#subst_4 #delSpan_1"
                     >Revised by Goethe using pencil</layer>
                  <layer target="#redo_1 #redo_2 #redo_3 #subst_1 #subst_2
#delSpan_1 #add_1"
                     >Fixation of the revised passages and further revisions by Goethe using
                     ink</layer>
               </listLayer>
            </creation>
         </profileDesc> [...] <document>
            <surface>
               <zone xml:id="zone_1">
                  <line xml:id="line_1">
                     <handShift new="#g_bl"/>
                     <rewrite hand="#g_t" xml:id="redo_1">Nun</rewrite>
                  </line>
                  <line><handShift new="#jo_t"/>Ihr wanſtige Schuften mit den Feuerbacken</line>
                  <line xml:id="line_2">
                     <handShift new="#g_bl"/>
                     <rewrite hand="#g_t" xml:id="redo_2">feiſt</rewrite>
                  </line>
                  <line>Ihr glüht ſo recht vom Höllen Schwefel ſatt.</line> [...]       </zone>
            </surface>
         </document>
         <text>
            <body>
               <l n="11656">
                  <subst xml:id="subst_1">
                     <del>Ihr</del>
                     <add>Nun</add>
                  </subst> wanſtige Schuften mit den Feuerbacken</l>
               <l n="11657">Ihr glüht ſo recht vom Höllen Schwefel <subst xml:id="subst_2">
                     <del>ſatt</del>
                     <add>feiſt</add>
                  </subst>.</l>
            </body>
         </text>
      </egXML>
      <p>The documentary transcription stresses the writing process, while the textual transcription
         emphasizes textual alterations. In either case, the layer of writing activity associated
         with a particular feature in the transcript is explicitly indicated. From the documentary
         perspective, the stage assignments describe the writing process, in that they specify,
         which segment has been written when and how often. From the textual perspective, the markup
         concentrates on the order of textual alterations and makes no assumptions about the order
         of writing.  In this example, the association is made by pointing from the <gi>layer</gi>
         element to all the passages and alterations in question in either perspective, which has
         the merit of not confusing the presentation of the interventions concerned with writing
         sequence information, at the price of requiring a distinct identifier on each intervention.
      </p>
   </div>










<div><head>Formal specifications</head>

<!-- existing specs needing change -->
   <classSpec type="atts" ident="att.global" mode="change" module="tei">
<classes>
   <memberOf key="att.global.linking"/>
   <memberOf key="att.global.analytic"/>
   <memberOf key="att.global.facs"/>
   <memberOf key="att.layered" mode="add"/>
</classes>
   </classSpec>

   <elementSpec ident="creation" module="header" mode="change">
<content>
   <rng:ref name="macro.phraseSeq.limited"/>
   <rng:optional>
      <rng:ref name="layers"/>
   </rng:optional>
</content>
   </elementSpec>


<!-- new specs -->

   <classSpec ident="att.layered" type="atts" mode="add" module="tei">
<desc>groups elements which can be assigned to a specific text layer by means of
   the attributes it provides.</desc>
<attList>
   <attDef ident="layer" >
      <desc>points to one or more <gi>layer</gi> elements which contain a
         description of a text-layer to which the editors think the alteration/
         text passage marked by the element bearing this attribute (and its
         children) belongs.</desc>
      <datatype minOccurs="1" maxOccurs="unbounded">
         <rng:ref name="data.pointer"/>
      </datatype>
   </attDef>
</attList>
   </classSpec>


   <elementSpec ident="listLayer" module="header"
mode="add">
<desc>contains one or more descriptions of the layers which have been identified
   in the genesis of a text.</desc>
<classes>
   <memberOf key="att.global"/>
   <memberOf key="att.typed"/>
</classes>
<content>
   <rng:oneOrMore>
		       <rng:choice>
			 <rng:ref name="listLayer"/>
      <rng:ref name="layer"/>
		       </rng:choice>
   </rng:oneOrMore>
</content>
<attList>
<attDef ident="ordered" mode="add">
      <desc>indicates whether or not the order in which the children
      of this element are presented is significant</desc>
      <datatype>
         <ref xmlns="http://relaxng.org/ns/structure/1.0" name="data.truthValue"/>
      </datatype>
<defaultVal>false</defaultVal>
   </attDef>
</attList>
   </elementSpec>

   <elementSpec ident="layer" ns="http://www.tei-c.org/ns/geneticEditions"
mode="add">
<desc>documents a particular layer in the genesis of a text.</desc>
<classes>
   <memberOf key="att.datable"/>
   <memberOf key="att.editLike"/>
   <memberOf key="att.global"/>
   <memberOf key="att.typed"/>
</classes>
<content>
         <rng:ref name="macro.specialPara"/>
</content>
<attList>
   <attDef ident="target" mode="add">
      <desc>points to one or more elements that belong to this layer.</desc>
      <datatype minOccurs="1" maxOccurs="unbounded">
         <rng:ref name="data.pointer"/>
      </datatype>
   </attDef>
</attList>
   </elementSpec>

   <elementSpec ident="line" ns="http://www.tei-c.org/ns/geneticEditions" mode="add">
<desc>contains the transcription of a topographic line in the source
   document</desc>
<classes>
   <memberOf key="model.zonePart"/>
   <memberOf key="att.typed"/>
   <memberOf key="att.global"/>
</classes>
<content>
   <rng:zeroOrMore>
      <rng:choice>
         <rng:text/>
         <rng:ref name="model.global"/>
         <rng:ref name="model.linePart"/>
      </rng:choice>
   </rng:zeroOrMore>
</content>
   </elementSpec>

               <elementSpec ident="mod" ns="http://www.tei-c.org/ns/geneticEditions" mode="add">
                  <desc>represents any kind of modification identified within a text at a documentary level.</desc>
                  <classes>
                     <memberOf key="model.pPart.transcriptional"/>
                     <memberOf key="att.global"/>
                     <memberOf key="att.transcriptional"/>
                     <memberOf key="att.typed"/>
                     <memberOf key="att.spanning"/>
                  </classes>
                  <content>
                     <rng:ref name="macro.paraContent"/>
                  </content>
               </elementSpec>

</div></body>