<?xml version="1.0" encoding="UTF-8"?>
<!--
Copyright TEI Consortium. 
Licensed under the GNU General Public License. 
See the file COPYING.txt for details.
$Date$
$Id$
-->
<div xmlns="http://www.tei-c.org/ns/1.0" type="div1" xml:id="NH" n="31">
  <head>Non-hierarchical Structures</head>
  <p>XML strongly emphasizes a hierarchical document model. At various points, these Guidelines
    discuss problems which arise when using XML to encode textual features that either do not
    naturally lend themselves to representation in a strictly hierarchical form or conflict with
    other hierarchies represented in the markup. Examples of such situations include <list
      type="bullets">
      <item>
        <p>Conflict between the hierarchy established by the physical structure of a document (e.g.
          volume, page, column, line) and its rhetorical or linguistic structure (e.g. chapters,
          paragraphs, sentences, acts, scenes, etc.)</p>
      </item>
      <item>
        <p>Conflict between a verse text's metrical structure (e.g. its arrangment in stanzas and
          metrical lines) and its rhetorical or linguistic structure (e.g. phrases, sentences, and,
          for plays, acts, scenes, and speeches).</p>
      </item>
      <item>
        <p>Conflict between metrical, rhetorical, or linguistic structure and the representation of
          direct speech, especially if the quoted speech is interrupted by other elements (e.g.
            <said>What</said>, she asked, <said>was that all about</said>) or crosses metrical,
          rhetorical, or linguistic boundaries.</p>
      </item>
      <item>
        <p>Conflict between different analytical views or descriptions of a text or document, e.g.
          markup intended to encode diplomatic information about a word's appearance in a manuscript
          with markup intended to describe its morphology or pronunciation.</p>
      </item>
    </list>
  </p>
  <p>Non-nesting information poses fundamental problems for any XML-based encoding scheme, and it
    must be stated at the outset that no current solution combines all the desirable attributes of
    formal simplicity, capacity to represent all occurring or imaginable kinds of structures,
    suitability for formal or mechanical validation. The representation of non-hierarchical
    information is thus necessarily a matter of tradeoffs among various sets of advantages and
    disadvantages.</p>
  <p>These Guidelines support several methods for handling non-hierarchical information: <list
      type="bullets">
      <item>
        <p>redundant encoding of information in multiple forms (discussed in <ptr target="#NHME"
        />)</p>
      </item>
      <item>
        <p>the use of empty elements to delimit the boundaries of a non-nesting structure (discussed
          in <ptr target="#NHBM"/>)</p>
      </item>
      <item>
        <p>the division of a logically single non-nesting element into segments that nest that
          properly in their immediate hierarchical context but can also be reconstituted virtually
          using several methods (discussed in <ptr target="#NHVE"/>)</p>
      </item>
      <item>
        <p>stand-off markup: the annotation of information by pointing at it, rather than placing
          XML tags within it (discussed in <ptr target="#NHSO"/>)</p>
      </item>
    </list>
  </p>
  <p>In the sections which follow these techniques are described, and their advantages and
    disadvantages are briefly discussed. The various solutions to the problem will be exemplified
    using extracts from two poems as examples. The first is the openning quatrain from William
    Wordsworth's <title level="a">Scorn not the sonnet</title>: <quote>
      <l>Scorn not the sonnet; critic, you have frowned,</l>
      <l>Mindless of its just honours; with this key</l>
      <l>Shakespeare unlocked his heart; the melody</l>
      <l>Of this small lute gave ease to Petrarch's wound.</l>
    </quote> The second example is the third stanza from the fourth section of Robert Pinsky's
      <title level="a">Essay on Psychiatrists</title>: <quote>
      <lg>
        <l>Catholic woman of twenty-seven with five children</l>
        <l>And a first-rate body—pointed her finger</l>
        <l>at the back of one certain man and asked me,</l>
        <l>"Is that guy a psychiatrist?" and by god he was! "Yes,"</l>
        <l>She said, "He <emph>looks</emph> like a psychiatrist."</l>
        <l>Grown quiet, I looked at his pink back, and thought.</l>
      </lg>
    </quote> These two texts can be analysed in various ways. The first, which we might describe as
    the <soCalled>Metrical View</soCalled> encodes the text according to its metrical features: line
    divisions (as here), stanzas or cantos in larger poems, and perhaps prosodic features like
    stress or syllable patterns, alliteration, or rhyme. A second view, which we might describe as
    the <soCalled>Grammatical</soCalled>, encodes linguistic and rhetorical features: phonemes,
    morphemes, words, phrases, clauses, and sentences. A third view, the
    <soCalled>Dialogic</soCalled>, might concentrate on narrative voice: distinguishing between the
    narrator and his/her interlocutors and identifying individual segments as direct quotations. In
    our examples, we will restrict ourselves to relatively simple conflicts: for the <term>Metrical
      View</term> we will encode only lines and linegroups; for the <term>Grammatical View</term> we
    will restrict ourselves to encoding sentences; and for the <term>Dialogic View</term>, we only
    will distinguish direct quotation from other narration.</p>
  <div type="div2" xml:id="NHME">
    <head>Multiple Encodings of the Same Information</head>
    <p>Conceptually, the simplest method of disentangling two (or more) conflicting hierarchical
      views of the same information is to encode it twice (or more), each time capturing a single
      view.</p>
    <p>Thus, for example, the <term>Metrical View</term> of <title>Scorn not the sonnet</title>
      might be encoded as follow, using the <gi>l</gi> element to encode each metrical line: <egXML
        xmlns="http://www.tei-c.org/ns/Examples">
        <l>Scorn not the sonnet; critic, you have frowned,</l>
        <l>Mindless of its just honours; with this key</l>
        <l>Shakespeare unlocked his heart; the melody</l>
        <l>Of this small lute gave ease to Petrarch's wound.</l>
      </egXML></p>
    <p>The <term>Grammatical View</term> would be encoded by taking the same text and replacing the
      metrical markup with information about its sentence structure: <egXML
        xmlns="http://www.tei-c.org/ns/Examples">
        <p>
          <s>Scorn not the sonnet</s>; <s>critic, you have frowned, Mindless of its just
          honours</s>; <s>with this key Shakespeare unlocked his heart</s>; <s>the melody Of this
            small lute gave ease to Petrarch's wound</s>.</p>
      </egXML></p>
    <p>Likewise, the more complex passage from Pinsky would be encoded in three different ways to
      reflect the different metrical, grammatical, and dialogic views of its text: <egXML
        xmlns="http://www.tei-c.org/ns/Examples">
        <lg>
          <l>Catholic woman of twenty-seven with five children</l>
          <l>And a first-rate body—pointed her finger</l>
          <l>at the back of one certain man and asked me,</l>
          <l>"Is that guy a psychiatrist?" and by god he was! "Yes,"</l>
          <l>She said, "He <emph>looks</emph> like a psychiatrist."</l>
          <l>Grown quiet, I looked at his pink back, and thought.</l>
        </lg>
      </egXML>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <p>
          <s>Catholic woman of twenty-seven with five children And a first-rate body—pointed her
            finger at the back of one certain man and asked me, "Is that guy a psychiatrist?" and by
            god he was!</s>
          <s>"Yes," She said, "He <emph>looks</emph> like a psychiatrist."</s>
          <s>Grown quiet, I looked at his pink back, and thought</s>. </p>
      </egXML>
      <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <p> Catholic woman of twenty-seven with five children And a first-rate body—pointed her
          finger at the back of one certain man and asked me, <said>Is that guy a
          psychiatrist?</said> and by god he was! <said>Yes,</said> She said, <said>He
            <emph>looks</emph> like a psychiatrist.</said> Grown quiet, I looked at his pink back,
          and thought. </p>
      </egXML>
    </p>
    <p>The advantages of this method of markup are that each way of looking at the information is
      explicitly represented in the data and and that the individual views are simple to process.
      The disadvantages are that the method requires the maintenance of multiple copies of identical
      textual content (an invitation to inconsistency) and that there is no explicit indication that
      the various views, which might be in separate files, are related to each other: it might prove
      difficult to combine the views or access information from one view while processing the file
      that contains the encoding of another.<note>
        <p>It has been shown, however, that it is possible to relate the different annotations in an
          indirect way: if the textual content of the annotations is identical, the very text can
          serve as a means for linking the different annotations, as described by <ref
            target="http://xml.coverpages.org/Witt-allc2002.html">Witt 2002</ref>.</p>
      </note></p>
  </div>
  <div type="div2" xml:id="NHBM">
    <head>Boundary Marking with Empty Elements</head>
    <p>A second method for accommodating non-hierarchical objects in an XML document involves
      marking the starting and (usually) end points of the non-nesting material. This prevents
      textual features that fall outside the privileged hierarchy from invalidating the document
      while identifying its beginning and end for further processing. The disadvantage of this
      method is that no single XML element represents the non-nesting material and, as a result,
      processing with XML technologies is significantly more difficult.</p>
    <p>The empty elements used at each end are called <term>segment-boundary elements</term> or
        <term>segment-boundary delimiters</term>. There are several variations on this method of
      encoding: <list type="bullets">
        <item>
          <p>For some common structural features, the TEI provides milestone elements that can be
            used to mark the beginning of a textual feature. These include <gi>lb</gi>, <gi>pb</gi>,
              <gi>cb</gi>, <gi>handshift</gi>, and the generic <gi>milestone</gi>. Using
            <gi>lb</gi>, for example, it is possible to indicate both the lineation of a poem and
            its grammatical division into sentences<note>
              <p>While this division allows encoders to indicate the metrical lineation of most
                modern verse, it should be noted that <gi>lb</gi> strictly speaking refers to the
                physical line division of a page rather than a metrical unit. This method would not
                work with literary cultures, such as that of Anglo-Saxon England, for example, that
                do not mark metrical lines with a line break.</p>
            </note>:<egXML xmlns="http://www.tei-c.org/ns/Examples">
              <p>
                <lb n="1"/><s>Scorn not the sonnet</s>; <s>critic, you have frowned, <lb n="2"
                  />Mindless of its just honours</s>; <s>with this key <lb n="3"/>Shakespeare
                  unlocked his heart</s>; <s>the melody <lb n="4"/>Of this small lute gave ease to
                  Petrarch's wound</s>. </p>
            </egXML></p>
        </item>
        <item>
          <p>The segment boundaries may be delimited by a generic element (e.g. <gi>anchor</gi>)
            with attribute values being used to indicate the type of feature being delimited and
            whether a given tag opens or closes the feature. <eg><![CDATA[<l><anchor type="delimiter" subtype="sentence" n="start"/>Scorn not the sonnet<anchor type="delimiter" subtype="sentence" n="end"/>; <anchor type="delimiter" subtype="sentence" n="start"/>critic, you have frowned,</l>
            <l>Mindless of its just honours<anchor type="delimiter" subtype="sentence" n="end"/>; <anchor type="delimiter" subtype="sentence" n="start"/>with this key</l>
            <l>Shakespeare unlocked his heart<anchor type="delimiter" subtype="sentence" n="end"/>; <anchor type="delimiter" subtype="sentence" n="start"/>the melody</l>
            <l>Of this small lute gave ease to Petrarch's wound<anchor type="delimiter" subtype="sentence" n="end"/>.</l>]]></eg></p>
        </item>
        <item>
          <p>Empty existing elements can be used to delimit the beginning and end of a non-nesting
            feature: <eg><![CDATA[<l><s n="start"/>Scorn not the sonnet<s n="end"/>; <s n="start"/>critic, you have frowned,</l>
            <l>Mindless of its just honours<s n="end"/>; <s n="start"/>with this key</l>
            <l>Shakespeare unlocked his heart<s n="end"/>; <s n="start"/>the melody</l>
            <l>Of this small lute gave ease to Petrarch's wound<s n="end"/>.</l>]]></eg><note
              place="foot">This method has been introduced in the markup literature under various
              names, e.g. Trojan milestones, HORSE markup, CLIX, and COLT. It has been described in
              detail by <ptr type="cit" target="#NH-BIBL-1"/>.</note></p>
        </item>
        <item>
          <p>Custom elements can be designed to provide richer information about the features being
            delimited and/or its boundaries as attribute values or part of the element name itself:
            e.g. <gi>boundary-start element="sentence"/</gi>... <gi>boundary-end
            element="sentence"/</gi>, <gi>sentence-boundary position="start"/</gi>...
              <gi>sentence-boundary position="end"/</gi>, or <gi>sentence-boundary-start/</gi>...
              <gi>sentence-boundary-end/</gi>: <eg><![CDATA[<l><sentence-boundary-start/>Scorn not the sonnet<sentence-boundary-end/>; <sentence-boundary-start/>critic, you have frowned,</l>
            <l>Mindless of its just honours<sentence-boundary-end/>; <sentence-boundary-start/>with this key</l>
            <l>Shakespeare unlocked his heart<sentence-boundary-end/>; <sentence-boundary-start/>the melody</l>
            <l>Of this small lute gave ease to Petrarch's wound<sentence-boundary-end/>.</l>]]></eg></p>
        </item>
      </list>
    </p>
    <p>In each of the above examples, the relationship between the start and end delimiters (where
      these exist) of a given feature is implicit: it is assumed that "end" delimiters close the
      nearest preceding "start" delimiter, or, in the case of milestones, that the next milestone
      element marks the end of one feature and the beginning of the next. Complications arise,
      however, when the non-nesting text overlaps with other non-nesting text of the same type, as
      might be the case, for example, in a grammatical analysis of the various possible
      interpretations of the Noun Phrase <q>A Broadway Hit and Run</q>—which can be interpreted as
      being either a description of the simultaneous success of a New York play and marathon, or a
      description of a car crash on a New York street. In order to indicate the two possible
      analyses of this phrase, an unambiguous method of associating opening and closing
      boundary-delimiters is required: <eg><![CDATA[<phr>
  <phr xml:id="NPOptionA-1" n="start"/>
     Broadway
  <phr xml:id="NPOptionB" n="start"/>     
     hit
  <phr corresp="#NPOptionA-1" n="end"/>
  and 
  <phr xml:id="NPOptionA-2" n="start"/>
     run
  <phr corresp="#NPOptionB" n="end"/>
  <phr corresp="#NPOptionA-2" n="end"/>
</phr>]]></eg>
    </p>
    <p>In this encoding, the phrase <q>Broadway Hit and Run</q> is analysed in two incompatible
      ways. The first interpretation (indicated by the <att>xml:id</att> values
        <mentioned>phraseOptionA-1</mentioned> and <mentioned>phraseOptionA-2</mentioned>) assumes
      that there are two nouns in the sentence: <mentioned>hit</mentioned> (referring to a play) and
        <mentioned>run</mentioned> (referring to a marathon). The second intepretation (indicated by
      the <att>xml:id</att> value <mentioned>phraseOptionB</mentioned> assumes that there is one
      noun in the sentence, referring to a <mentioned>hit and run</mentioned> auto accident.</p>
    <p>Despite their advantages, segment-boundary delimiters incur the disadvantage of cumbersome
      processing: since the elements of the analysis (e.g. the sentences in the poems) are not
      uniformly represented by nodes in the document tree, they must be reconstituted by software in
      an ad hoc fashion, which is likely to be difficult and may be error prone.</p>
    <p>Most important for some encoders, the method also disguises the relationship between the
      beginning and the ending of each logical element. This makes it impossible for standard
      validation software to provide the same kind of validation possible elsewhere in the encoding.
      When using grammar based schema languages it is not possible to define a content model for the
      range limited by empty elements.<note place="foot"> Grammar based schema languages (e.g. DTD,
        W3C Schema, and RELAX NG) are used to define markup languages (e.g. XHTML or TEI).
        Rule-based schema languages (e.g. Schematron) can be used to define further constrains. Such
        a rule-based schema language permits a sequence of certain elements between empty elements
        to be legitimized or prohibited. </note></p>
  </div>
  <div type="div2" xml:id="NHVE">
    <head>Fragmentation and Reconstitution of Virtual Elements</head>
    <p>A third method involves breaking what might be considered a single logical (but non-nesting)
      element into multiple smaller structural elements that fit within the dominant hierachy but
      can be reconstituted virtually. For example, if a passage of direct discourse begins in the
      middle of one paragraph and continues for several more paragraphs, one could encode the
      passage as a series of <gi>said</gi> elements, each fitting within a <gi>p</gi> element. The
      resulting encoding is valid XML, but the text enclosed within each set of <gi>said</gi> tags
      represents only a portion of the complete passage of direct discourse. For this reason these
      elements are sometimes called <soCalled>partial elements</soCalled>.</p>
    <p>Thus the speech in our example from Pinsky's poem can be broken up to fit into the hierarchy
      established by the metrical lineation: <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <lg>
          <l>Catholic woman of twenty-seven with five children</l>
          <l>And a first-rate body—pointed her finger</l>
          <l>at the back of one certain man and asked me,</l>
          <l><said>Is that guy a psychiatrist?</said> and by god he was! <said>Yes,</said></l>
          <l>She said, <said>He <emph>looks</emph> like a psychiatrist.</said></l>
          <l>Grown quiet, I looked at his pink back, and thought.</l>
        </lg>
      </egXML></p>
    <p>Similarly, the sentences in our example from Wordsworth could be encoded: <egXML
        xmlns="http://www.tei-c.org/ns/Examples">
        <l><s>Scorn not the sonnet</s>; <s>critic, you have frowned</s>,</l>
        <l><s>Mindless of its just honours</s>; <s>with this key</s></l>
        <l><s>Shakespeare unlocked his heart</s>; <s>the melody</s></l>
        <l><s>Of this small lute gave ease to Petrarch's wound</s>.</l>
      </egXML></p>
    <p>There are two main problems with this type of encoding. The first is that it usually means
      that the encoding has more elements claiming to represent a feature than there are actual
      instances of that feature in the text. Thus, for example, the passage from <title level="a"
        >Scorn not the sonnet</title> marks seven spans of text using <gi>s</gi>, even though there
      are only four linguistic sentences in the passage.</p>
    <p>The second problem with this method is that it can be semantically misleading. Although it is
      tagged using <gi>s</gi>, the element for <term>sentence</term>, for example, the text
        <mentioned>Mindless of its just honours</mentioned> is not a linguistic sentence.</p>
    <p>Taken together, these problems can make automatic analysis of the fragmented feature
      difficult. An analysis that intended to count the number of sentences in Wordsworth's poem,
      for example, would arrive at an inflated figure if it just counted the <gi>s</gi> tags.
      Likewise, a project interested in doing a linguistic analysis of Wordsworth's sentence syntax
      would not be able to assume that each <gi>s</gi> represented a linguistic sentence.</p>
    <p>The technique of fragmentation is often complemented by the
    technique of virtual joins.  Virtual joins may be used to combine
    objects in the text to a new hierarchy. Here is <title
    level="a">Scorn not the sonnet</title> again; this time the
    relationship between the parts of the fragmented sentences is
    indicated explicitly using the <att>next</att> and <att>prev</att>
    attributes described in <ptr target="#SAAG"/>. <egXML
    xmlns="http://www.tei-c.org/ns/Examples">
        <lg>
          <l><s xml:id="S01">Scorn not the sonnet</s>; <s xml:id="s2a" next="s2b">critic, you have
              frowned</s>,</l>
          <l><s xml:id="s2b" previous="s2a">Mindless of its just honours</s>; <s xml:id="s3a"
              next="s3b">with this key</s></l>
          <l><s xml:id="s3b" previous="s3a">Shakespeare unlocked his heart</s>; <s xml:id="s4a"
              next="s4b">the melody</s></l>
          <l><s xml:id="s4b" previous="s4a">Of this small lute gave ease to Petrarch's
          wound</s>.</l>
        </lg>
      </egXML> This method of virtually joining partial elements is sometimes called
        <soCalled>chaining</soCalled>. </p>
    <p>A even simpler mechanism for virtually joining fragments is the use of the <att>part</att>
      attribute described in <ptr target="#SASE"/>. Here is the Pinsky stanza with the quotation
      split over lines 4 and 5 in the stanza aggregated into a single virtual <gi>said</gi> elements
      by the use of the values <q>I</q> for initial and <q>F</q> for final: <egXML
        xmlns="http://www.tei-c.org/ns/Examples">
        <lg>
          <l>Catholic woman of twenty-seven with five children</l>
          <l>And a first-rate body—pointed her finger</l>
          <l>at the back of one certain man and asked me,</l>
          <l><said>Is that guy a psychiatrist?</said> and by god he was! <said part="I">Yes,</said></l>
          <l>She said, <said part="F">He <emph>looks</emph> like a psychiatrist.</said></l>
          <l>Grown quiet, I looked at his pink back, and thought.</l>
        </lg>
      </egXML> As this example suggests, this mechanism can also be used for aggregating
      discontinuous textual features as well non-nesting ones. The use of part allows the encoder
      not only to delimit a quotation that crosses a metrical line boundary, it is also aggregating
      a quotation that is interrupted by the narrative <mentioned>She said</mentioned>.</p>
    <p>The disadvantage of this mechanism is that it does not work well for cases of self-overlap,
      or if there are nested occurences of the the same element type, as it can become difficult to
      ascertain which initial, medial, or final partial element should be combined with which
      others. This can be illustrated using a slightly modified verse from a Tom Lehrer song: <egXML
        xmlns="http://www.tei-c.org/ns/Examples">
        <l>
          <s part="I">Don't say that he's hypocritical,</s>
        </l>
        <l>
          <s part="F">Say rather that he's apolitical.</s>
        </l>
        <l>
          <s part="I">
            <said>
              <s part="I">Once rockets go up, who says where they come down —</s>
            </said>
          </s>
        </l>
        <l>
          <s part="F"><said>
              <s part="F">That's not my department!</s>
            </said>, says Wernher von Braun.</s>
        </l>
      </egXML></p>
    <p>A third method for aggregating fragmented partial elements involves using markup that is not
      directly part of the encoding, e.g. the <gi>join</gi> element. In this method, a <gi>join</gi>
      element is used elsewhere in the document to indicate explicitly the members of the virtual
      element: <egXML xmlns="http://www.tei-c.org/ns/Examples">
        <l><w xml:id="w01">Scorn</w>
          <w xml:id="w02">not</w>
          <w xml:id="w03">the</w>
          <w xml:id="w04">sonnet</w>; <w xml:id="w05">critic</w>, <w xml:id="w06">you</w>
          <w xml:id="w07">have</w>
          <w xml:id="w08">frowned</w>,</l>
        <l><w xml:id="w09">Mindless</w>
          <w xml:id="w10">of</w>
          <w xml:id="w11">its</w>
          <w xml:id="w12">just</w>
          <w xml:id="w13">honours</w>; <w xml:id="w14">with</w>
          <w xml:id="w15">this</w>
          <w xml:id="w16">key</w></l>
        <l><w xml:id="w17">Shakespeare</w>
          <w xml:id="w18">unlocked</w>
          <w xml:id="w19">his</w>
          <w xml:id="w20">heart</w>; <w xml:id="w21">the</w>
          <w xml:id="w22">melody</w></l>
        <l><w xml:id="w23">Of</w>
          <w xml:id="w24">this</w>
          <w xml:id="w25">small</w>
          <w xml:id="w26">lute</w>
          <w xml:id="w27">gave</w>
          <w xml:id="w28">ease</w>
          <w xml:id="w29">to</w>
          <w xml:id="w30">Petrarch's</w>
          <w xml:id="w31">wound</w>.</l>

        <!-- Elsewhere in the document -->

        <p>
          <join result="s" scope="root" targets="#w01 #w02 #w03 #w04"/>
          <join result="s" scope="root" targets="#w05 #w06 #w07 #w08 #w09 #w10 #w11 #w12 #w13"/>
          <join result="s" scope="root" targets="#w14 #w15 #w16 #w17 #w18 #w19 #w20"/>
          <join result="s" scope="root"
            targets="#w21 #w22 #w23 #w24 #w25 #w26 #w27 #w28 #w29 #w30 #w31"/>
        </p>
      </egXML>
    </p>
    <p>The major advantage of fragmentation and virtual joins is that it allows all the hierarchies
      in the text to be handled explicitly, both the privileged one directly represented, and the
      alternate hierarchy which has been split up and rejoined. The major disadvantages are that
      (like most of the other methods described here) it privileges one hierarchy over the others,
      requires special processing to reconstitute the elements of the other hierarchies, and, except
      in the case of join, can be semantically misleading.</p>
  </div>
  <div type="div2" xml:id="NHSO">
    <head>Stand-off Markup</head>
    <p>Classic use of markup is characterized by embedding the annotation in the text. An
      alternative approach separates the text and the annotation. This approach is known as
      stand-off annotation. See section <ptr target="#SASO"/> for more information on and examples
      of stand-off markup. Stand-off annotation establishes a new hierarchy by building a new tree
      whose nodes are XML elements which do not contain textual content, but rather links to another
        <term>layer</term>: <gloss>a node in another XML document or a span of text</gloss>.
      <?sb2aw In some respects a generalization of the virtual
            joins, because not only contents of elements are joined, but also
            ranges between points within the document. ?>
      This approach can be subdivided according to different criteria. A first distinction concerns
      the link base, i.e. the content to which annotations are to be applied. Sometimes the link
      target contains markup that can be referred to explicitly, as in the following example where
      the offset markup uses the <att>xml:id</att> values on <gi>w</gi> to provide targets for
        <gi>xinclude</gi>: 
<!--
<egXML xmlns="http://www.tei-c.org/ns/Examples">
        <l><w xml:id="w01">Scorn</w>
          <w xml:id="w02">not</w>
          <w xml:id="w03">the</w>
          <w xml:id="w04">sonnet</w>; <w xml:id="w05">critic</w>, <w xml:id="w06">you</w>
          <w xml:id="w07">have</w>
          <w xml:id="w08">frowned</w>,</l>
        <l><w xml:id="w09">Mindless</w>
          <w xml:id="w10">of</w>
          <w xml:id="w11">its</w>
          <w xml:id="w12">just</w>
          <w xml:id="w13">honours</w>; <w xml:id="w14">with</w>
          <w xml:id="w15">this</w>
          <w xml:id="w16">key</w></l>
        <l><w xml:id="w17">Shakespeare</w>
          <w xml:id="w18">unlocked</w>
          <w xml:id="w19">his</w>
          <w xml:id="w20">heart</w>; <w xml:id="w21">the</w>
          <w xml:id="w22">melody</w></l>
        <l><w xml:id="w23">Of</w>
          <w xml:id="w24">this</w>
          <w xml:id="w25">small</w>
          <w xml:id="w26">lute</w>
          <w xml:id="w27">gave</w>
          <w xml:id="w28">ease</w>
          <w xml:id="w29">to</w>
          <w xml:id="w30">Petrarch's</w>
          <w xml:id="w31">wound</w>.</l>-->

<egXML xmlns="http://www.tei-c.org/ns/Examples">

        <p xmlns:xi="http://www.example.org/cannot/really/use/XInclude">
          <s>
            <xi:include href="." xpointer="range(element(w01),element(w04))"/>
          </s>
          <s>
            <xi:include href="." xpointer="range(element(w05),element(w13))"/>
          </s>
          <s>
            <xi:include href="." xpointer="range(element(w14),element(w20))"/>
          </s>
          <s>
            <xi:include href="." xpointer="range(element(w21),element(w31))"/>
          </s>
        </p>
      </egXML>
    </p>
    <p>This is very similar to the use of <gi>join</gi> discussed above; the main advantages of
        <gi>XInclude</gi> over <gi>join</gi> are that it is possible to specify attributes on the
      aggregate <gi>s</gi> elements, and that there exists off-the-shelf software that will perform
      XInclude processing. Stand-off markup may be used even when the base text being annotated is
      plain text, i.e. does not have any XML encoding. In this case the range of text to be
      annotated is indicated by character offsets. See <ptr target="#SATS"/>, in particular <ptr
        target="#SATSSR"/>. Another distinction concerns the number of files which can serve as link
      targets. Often, one (dedicated) annotation is used as the link target of all the other
      annotations. It is also possible to freely interlink several layers.</p>
    <p>It has been noted that stand-off markup has several advantages over embedded annotations. In
      particular, it is possible to produce annotations of a text even when the source document is
      read-only. Furthermore, annotation files can be distributed without distributing the source
      text. Further advantages mentioned in the literature are that discontinuous segments of text
      can be combined in a single annotation, that independent parallel coders can produce
      independent annotations, and that different annotation files can contain different layers of
      information. Lastly, it has also been noted that this approach is elegant.</p>
    <p>But there are also several drawbacks. First, new stand-off annotated layers require a
      separate interpretation, and the layers — although separate — depend on each other. Moreover,
      although all of the information of the multiple hierarchies is included, the information may
      be difficult to access using generic methods.</p>
  </div>
  <div type="div2" xml:id="NHNX">
    <head>Non-XML-based Approaches</head>
    <p>There exist many non-XML methods of encoding a text that either solve or do not suffer the
      problem of the inability to encode overlapping hierarchies. These include, but are not limited
      to the following proposals.</p>
    <p>One attempt at extending XML is represented by the work of Andreas Witt et.al. <ptr
        type="cit" target="#NH-BIBL-2"/>, who have applied the notion of concurrent markup to XML
      (thus reintroducing the CONCUR feature of SGML, which was omitted from XML).</p>
    <p>Alexander Dekhtyar and students at the University of Kentucky have also developed a form of
      document representation in which several trees share all or part of the same frontier, and in
      which each individual view of the document has the form of a tree. <ptr type="cit"
        target="#NH-BIBL-3"/></p>
    <p>The <soCalled>colored XML</soCalled> proposal <ptr type="cit" target="#NH-BIBL-4"/> stores a
      body of information as a set of intertwined XML trees. The colored XML approach eliminates
      unnecessary redundancy and makes the database readily updatable, while allowing the user to
      exploit different hierarchical access paths.</p>
    <p>The MultiX proposal <ptr type="cit" target="#NH-BIBL-5"/> represents documents as directed
      graphs. Because XML is used to represent the graph, the document is, at least in principle,
      manipulable with standard XML tools.</p>
    <p>According to the Just-In-Time-Trees proposal <ptr type="cit" target="#NH-BIBL-6"/>, documents
      may be stored using XML, but the XML representation is processed in non-standard ways and may
      be mapped onto different data structures than those known from XML.</p>
    <p>The <choice>
        <abbr>LMNL</abbr>
        <expan>Layered Markup and Annotation Language</expan>
      </choice> proposal offers alternatives to the basic XML linear form as well as its data model
      and processing model, with an alternative notation to XML and a data structure based on Core
      Range Algebra <ptr type="cit" target="#NH-BIBL-7"/>.</p>
    <p><choice>
        <expan>Markup Languages for Complex Documents</expan>
        <abbr>MLCD</abbr>
      </choice> provides a notation (TexMECS) and a data structure (Goddag) as well as a draft
      constraint language for the representation of non-hierarchical structures. <ptr type="cit"
        target="#NH-BIBL-8"/></p>
    <p>These approaches are based either on non-standard XML processing or data models, or not not
      based on XML at all. Since TEI is currently based on XML they are not described any further in
      these Guidelines.</p>
  </div>
  <div type="div2" xml:id="NHDI">
    <head>Discussion</head>
    <p>All proposed solutions of the multiple hierarchy problem have advantages as well as
      drawbacks. For different applications and usage scenarios, different solutions may be
      approriate.</p>
    <list type="bullets">
      <item>
        <p>For editing purposes the following solutions may be most appropriate:<list type="bullets">
            <item>Multiple encodings of the same information </item>
            <item>Remodeling of the document class </item>
            <item>Boundary marking with empty elements </item>
          </list> The choice of a solution depends on a number of specifics: <list type="bullets">
            <item>the number of different views and potential hierarchies</item>
            <item>the amount of overlap</item>
            <item>how much, if any, customization is required</item>
            <item>how much encoding guidance annotators need from the XML editing software</item>
          </list>. If good (special purpose) software is available it might also be appropriate to
          use stand-off markup or non XML-based solutions.</p>
      </item>
      <item>For processing, the stand-off-approach often is quite easy to handle. Several readily
        available XML tools will perform XInclude processing.</item>
      <item>For sustainable storage and easy information transfer redundant encoding is desirable.
        Other formats can be generated by unifying the separate annotations.</item>
    </list>
  </div>
</div>