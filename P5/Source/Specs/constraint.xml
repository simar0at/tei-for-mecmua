<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright TEI Consortium. 
Licensed under the GNU General Public License. 
See the file COPYING.txt for details
$Date: 2009-01-23 08:18:40 +0000 (Fri, 23 Jan 2009) $
$Id: content.xml 5474 2009-01-23 08:18:40Z ge8 $
-->
<elementSpec 
    xmlns:s="http://www.ascc.net/xml/schematron" 
    xmlns:sch="http://purl.oclc.org/dsdl/schematron"
    xmlns="http://www.tei-c.org/ns/1.0" 
    xmlns:rng="http://relaxng.org/ns/structure/1.0" module="tagdocs" ident="constraint">
  <gloss>constraint on schema</gloss>
  <desc>contains  a constraint, expressed in an XML syntax,
  which cannot be expressed in the structural content model</desc>
  <classes>
    <memberOf key="att.identified"/>
  </classes>
  <content>
      <rng:choice>
	<rng:ref name="macro.anyXML"/>
        <rng:text/>
      </rng:choice>
  </content>
 
  <constraintGrp scheme="private">
   <constraint ident="local">
(output = (ident(title) ident(author) "You must supply a title or an author"), 
(differ(title) differ(author) "You must not supply both title and author") 
    </constraint>
  </constraintGrp>

  <constraintGrp scheme="isoschematron">
    <constraint ident="sch">
      <sch:ns prefix="s" uri="http://www.ascc.net/xml/schematron"/>
      <sch:report test="s:* and
		      not(parent::tei:constraintGrp/@scheme='schematron')">
	Rules in the Schematron 1.5 language must be inside
	a constraintGrp with a value of 'schematron' on the scheme attribute
      </sch:report>
    </constraint>
    <constraint ident="isosch">
      <sch:ns prefix="sch" uri="http://purl.oclc.org/dsdl/schematron"/>
      <sch:report test="sch:* and
		      not(parent::tei:constraintGrp/@scheme='isoschematron')">
	Rules in the ISO Schematron language must be inside
	a constraintGrp with a value of 'isoschematron' on the scheme attribute
      </sch:report>
    </constraint>
  </constraintGrp>
  <exemplum>
    <p>This constraint uses Schematron to enforce the presence of the
    <att>spanTo</att> attribute (which comes from an attribute class)
    on the <gi>addSpan</gi> element: </p>
    <egXML xmlns="http://www.tei-c.org/ns/Examples">
      <constraintGrp scheme="isoschematron">
	<constraint ident="demo-c1">
	  <sch:assert test="@spanTo">The spanTo= attribute of <sch:name/>
	  is required.</sch:assert>
	</constraint>
      </constraintGrp>
    </egXML>
  </exemplum>
  <exemplum>
    <p>This constraint uses Schematron to check whether a
    <gi>figure</gi> element has either a title or a description, 
    implementing an accessibility rule which says that pictures should
    have textual explanations: </p>
    <egXML xmlns="http://www.tei-c.org/ns/Examples">
      <constraintGrp scheme="isoschematron">
	<constraint ident="demo-c2">
	  <sch:report test="not(tei:figDesc or tei:head)"> You should
	  provide information in a figure from which
	  we can construct an alt attribute in HTML </sch:report>
	</constraint>
      </constraintGrp>
    </egXML>
  </exemplum>
  <listRef>
    <ptr target="#TDTAG"/>
  </listRef>
</elementSpec>
