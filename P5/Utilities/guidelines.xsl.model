<xsl:stylesheet
  exclude-result-prefixes="xlink dbk rng tei teix xhtml a edate estr html pantor xd xs xsl fo"
  extension-element-prefixes="exsl estr edate" version="1.0"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
  xmlns:dbk="http://docbook.org/ns/docbook"
  xmlns:edate="http://exslt.org/dates-and-times"
  xmlns:estr="http://exslt.org/strings"
  xmlns:exsl="http://exslt.org/common"
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
  xmlns:html="http://www.w3.org/1999/xhtml"
  xmlns:pantor="http://www.pantor.com/ns/local"
  xmlns:rng="http://relaxng.org/ns/structure/1.0"
  xmlns:tei="http://www.tei-c.org/ns/1.0"
  xmlns:teix="http://www.tei-c.org/ns/Examples"
  xmlns:xd="http://www.pnp-software.com/XSLTdoc"
  xmlns:xhtml="http://www.w3.org/1999/xhtml"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:import href="/usr/share/xml/tei/stylesheet/odds/odd2html.xsl"/>
  <xsl:key name="HEADS" match="tei:head"  use="concat(@xml:lang,@corresp)"/>
  <xsl:param name="googleAnalytics"></xsl:param>
  <xsl:param name="lang"/>
  <xsl:param name="doclang"/>
  <xsl:param name="splitLevel">0</xsl:param>
  <xsl:param name="footnoteFile">false</xsl:param>
  <xsl:param name="auto">false</xsl:param>
  <xsl:param name="numberFrontHeadings">true</xsl:param>
  <xsl:param name="displayMode">both</xsl:param>
  <xsl:param name="feedbackURL">http://www.tei-c.org/Consortium/contact.xml</xsl:param>
  <xsl:param name="homeLabel">TEI P5 Guidelines</xsl:param>
  <xsl:param name="homeWords">TEI P5</xsl:param>
  <xsl:param name="institution">Text Encoding Initiative</xsl:param>
  <xsl:param name="outputDir">Guidelines</xsl:param>
  <xsl:param name="parentURL">http://www.tei-c.org/Consortium/</xsl:param>
  <xsl:param name="parentWords">TEI Consortium</xsl:param>
  <xsl:param name="cssFile">guidelines.css</xsl:param>
  <xsl:param name="cssSecondaryFile">odd.css</xsl:param>
  <xsl:param name="cssPrintFile">guidelines-print.css</xsl:param>

  <xsl:key name="BACKLINKS" match="teix:egXML[@corresp]"
	   use="substring-after(@corresp,'#')"/>
  
  <xsl:key name="BACKLINKS" match="tei:ptr[@type='cit']"
	 use="substring-after(@target,'#')"/>


  <xsl:template name="copyrightStatement">Copyright TEI Consortium 2007</xsl:template>

  <xsl:template name="metaHook">
    <xsl:param name="title"/>
    <meta name="DC.Title" content="{$title}"/>
    <meta name="DC.Language" content="(SCHEME=iso639) en"/> 
    <meta name="DC.Creator" content="TEI,Oxford University Computing Services, 13 Banbury Road, Oxford OX2 6NN, United Kingdom"/>
    <meta name="DC.Creator.Address" content="tei@oucs.ox.ac.uk"/>
  </xsl:template>
  

  <xsl:template name="startDivHook">
    <xsl:if
      test="not(parent::tei:div) or not(local-name(preceding::*[1])='head')">
      <div>
	<xsl:choose>
        <xsl:when test="not(parent::tei:div) and child::tei:div">
	  <xsl:attribute name="class">
	    <xsl:text>miniTOC miniTOC_left</xsl:text>
	  </xsl:attribute>
	  <xsl:call-template name="subtoc"/>
	</xsl:when>
	<xsl:otherwise>
	  <xsl:attribute name="class">
	    <xsl:text>miniTOC miniTOC_right</xsl:text>
	  </xsl:attribute>
	</xsl:otherwise>
	</xsl:choose>
	<ul class="subtoc">
	  <li class="subtoc"><xsl:call-template name="previousLink"/></li>
	  <li class="subtoc"><xsl:call-template name="nextLink"/></li>
	  <li class="subtoc"><a class="navigation" href="index.html">
	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">homeWord</xsl:with-param>
	  </xsl:call-template>
	  </a> | <a
	  class="navigation" href="index-toc.html">
	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">tocWords</xsl:with-param>
	  </xsl:call-template>
	  </a></li>
	  <li class="subtoc">
	  <xsl:choose>
	    <xsl:when test="self::tei:elementSpec">
		<a class="navigation" href="REF-ELEMENTS.html">
		  <xsl:call-template name="showHead">
		    <xsl:with-param name="ID">
		      <xsl:text>REF-ELEMENTS</xsl:text>
		    </xsl:with-param>
		  </xsl:call-template>
		</a>
	    </xsl:when>
	    <xsl:when test="self::tei:classSpec[@type='model']">
		<a class="navigation" href="REF-CLASSES-MODEL.html">
		  <xsl:call-template name="showHead">
		    <xsl:with-param name="ID">
		      <xsl:text>REF-CLASSES-MODEL</xsl:text>
		    </xsl:with-param>
		  </xsl:call-template>
		</a>
	    </xsl:when>
	    <xsl:when test="self::tei:classSpec[@type='atts']">
		<a class="navigation" href="REF-CLASSES-ATTS.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>REF-CLASSES-ATTS</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
		</a>
	    </xsl:when>
	    <xsl:when test="self::tei:macroSpec">
		<a class="navigation" href="REF-MACROS.html">
		  <xsl:call-template name="showHead">
		    <xsl:with-param name="ID">
		      <xsl:text>REF-MACROS</xsl:text>
		    </xsl:with-param>
		  </xsl:call-template>
		</a>
	    </xsl:when>
	    <xsl:otherwise>
	      <!--
	      <xsl:for-each select="ancestor::tei:div">
		<div>
		  <xsl:attribute name="style">
		    <xsl:text>margin-left:</xsl:text>
		    <xsl:value-of select="count(ancestor::tei:div) + 1"/>
		    <xsl:text>em;</xsl:text>
		  </xsl:attribute>
		  <xsl:text>&#x21B3;</xsl:text>
		<a class="UP">
		  <xsl:attribute name="href">
		    <xsl:apply-templates mode="generateLink"
					 select="."/>
		  </xsl:attribute>
		  <xsl:call-template name="headerLink">
		    <xsl:with-param name="minimal"
				    select="$minimalCrossRef"/>
		  </xsl:call-template>
		</a>
		</div>
	      </xsl:for-each>
	      -->
	    </xsl:otherwise>
	  </xsl:choose>
	  </li>
	</ul>
      </div>
    </xsl:if>
  </xsl:template>


  <xsl:template name="mainPage">
    <xsl:param name="currentID"/>
    <xsl:call-template name="teiTOP"/>
    <div id="onecol" class="main-content">
      <xsl:call-template name="mainFrame">
        <xsl:with-param name="currentID" select="$currentID"/>
        <xsl:with-param name="minimal">true</xsl:with-param>
      </xsl:call-template>
      <xsl:if test="$currentID=''">
        <div style="float:left; margin:4%;">
          <h3>
	  	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Versions of the Guidelines</xsl:with-param>
		  </xsl:call-template>
	  </h3>
          <ul>
            <li>
              <a href="index-toc.html">
	      	  <xsl:call-template name="i18n">
		    <xsl:with-param name="word">tocWords</xsl:with-param>
		  </xsl:call-template>
	      </a>
            </li>
            <li>
              <a href="../../en/Guidelines.pdf">PDF</a>
            </li>
            <li><a
              href="http://www.tei-c.org/Council/tcw06.xml">
	      	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Getting the most recent version</xsl:with-param>
		  </xsl:call-template>
	    </a></li>
            <li><a
              href="http://tei.svn.sourceforge.net/viewvc/tei/">
              	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Sourceforge Subversion Repository</xsl:with-param>
		  </xsl:call-template>
	    </a></li>
            <li>
              <a
                href="http://sourceforge.net/tracker/?group_id=106328&amp;func=browse">
	      	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">BugsFeatures</xsl:with-param>
		  </xsl:call-template>
	      </a>
	    </li>
          </ul>
        </div>
        <div style="float:left; margin:4%;">
          <h3>
	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Some Popular Sections</xsl:with-param>
	  </xsl:call-template>
	  </h3>
          <ul>
            <li>
	      <a href="AB.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>AB</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="SG.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>SG</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="ST.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>ST</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="HD.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>HD</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="CO.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>CO</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="USE.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>USE</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="REF-CLASSES-MODEL.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>REF-CLASSES-MODEL</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="REF-CLASSES-ATTS.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>REF-CLASSES-ATTS</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
            <li>
	      <a href="REF-ELEMENTS.html">
		<xsl:call-template name="showHead">
		  <xsl:with-param name="ID">
		    <xsl:text>REF-ELEMENTS</xsl:text>
		  </xsl:with-param>
		</xsl:call-template>
	      </a>
            </li>
          </ul>
        </div>


        <xsl:variable name="name">TEI Guidelines TOC </xsl:variable>
        <xsl:call-template name="outputChunk">
          <xsl:with-param name="ident">
            <xsl:text>index-toc</xsl:text>
          </xsl:with-param>
          <xsl:with-param name="content">
            <html>
              <xsl:comment>THIS IS A GENERATED FILE. DO NOT EDIT (99) </xsl:comment>
              <head>
                <title>
                  <xsl:value-of select="$name"/>
                </title>
                <xsl:choose>
                  <xsl:when test="$cssFile = ''"/>
                  <xsl:when test="$cssFileInclude='true'">
                    <style>
		      <include href="{$cssFile}" parse="text" xmlns="http://www.w3.org/2001/XInclude"/>
		    </style>
                  </xsl:when>
                  <xsl:otherwise>
                    <link href="{$cssFile}" rel="stylesheet"
                      type="text/css"/>
                  </xsl:otherwise>
                </xsl:choose>
                <xsl:if test="not($cssSecondaryFile = '')">
                  <link href="{$cssSecondaryFile}" rel="stylesheet"
                    type="text/css"/>
                </xsl:if>
                <meta
                  content="Text Encoding Initiative Consortium XSLT stylesheets"
                  name="generator"/>
                <meta content="{$name}" name="DC.Title"/>
                <meta content="application/xhtml+xml; charset=utf-8"
                  http-equiv="Content-Type"/>
                <xsl:call-template name="includeJavascript"/>
                <xsl:call-template name="javascriptHook"/>
              </head>
              <body id="TOP">
                <xsl:attribute name="onload">
                  <xsl:text>startUp()</xsl:text>
                </xsl:attribute>
                <xsl:call-template name="bodyHook"/>
		<xsl:call-template name="teiTOP"/>
		<div id="onecol" class="main-content">
		  <xsl:call-template name="mainTOC"/>
		</div>
                <xsl:call-template name="stdfooter"/>
              </body>
            </html>
          </xsl:with-param>
        </xsl:call-template>
      </xsl:if>
      <xsl:call-template name="stdfooter"/>

    </div>
  </xsl:template>


  <xsl:template name="showHead">
    <xsl:param name="ID"/>
    <xsl:variable name="Here" select="/"/>
    <xsl:for-each select="key('IDS',$ID)">
      <xsl:choose>
	<xsl:when test="ancestor::tei:front">
	  <xsl:number format="i"/>
	</xsl:when>
	<xsl:when test="ancestor::tei:back">
	  <xsl:number format="A"/>
	</xsl:when>
	<xsl:otherwise>
	  <xsl:number/>
	</xsl:otherwise>
      </xsl:choose>
      <xsl:text> </xsl:text>
    </xsl:for-each>
    <xsl:for-each select="document('')">
      <xsl:choose>
	<xsl:when
	    test="key('HEADS',concat($documentationLanguage,$ID))">
	  <xsl:for-each select="key('HEADS',concat($documentationLanguage,$ID))">
	    <xsl:value-of select="."/>
	  </xsl:for-each>
	</xsl:when>
	<xsl:otherwise>
	  <xsl:for-each select="$Here">
	    <xsl:for-each select="key('IDS',$ID)">
	      <xsl:value-of select="tei:head"/>
	    </xsl:for-each>
	  </xsl:for-each>
      </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>

  <xsl:template name="numberFrontDiv">
    <xsl:param name="minimal"/>
    <xsl:if test="count(ancestor::tei:div)&lt;2">
      <xsl:number count="tei:div" format="i.i" level="multiple"/>
      <xsl:if test="$minimal='false'">
	<xsl:value-of select="$numberSpacer"/>
      </xsl:if>
    </xsl:if>
  </xsl:template>

  <xsl:template name="pageHeader">
    <xsl:param name="mode"/>
    <xsl:call-template name="makeHTMLHeading">
      <xsl:with-param name="class">title</xsl:with-param>
      <xsl:with-param name="text">
        <xsl:call-template name="generateTitle"/>
      </xsl:with-param>
      <xsl:with-param name="level">1</xsl:with-param>
    </xsl:call-template>

    <xsl:call-template name="makeHTMLHeading">
      <xsl:with-param name="class">subtitle</xsl:with-param>
      <xsl:with-param name="text">
        <xsl:call-template name="generateSubTitle"/>
      </xsl:with-param>
      <xsl:with-param name="level">2</xsl:with-param>
    </xsl:call-template>

  </xsl:template>

  <xsl:template name="stdheader">
    <xsl:param name="title" select="'(no title)'"/>
    <xsl:call-template name="pageHeader"/>
  </xsl:template>

  <xsl:template match="tei:titlePage">
    <!--
	<div class="titlePage">
	<h1>
	<xsl:apply-templates
	select="tei:docTitle/tei:titlePart/tei:title"/>
	</h1>
	<h2>
	<xsl:value-of select="tei:docAuthor"/>
	</h2>
	</div>
    -->
  </xsl:template>



  <!-- JC Adding headings -->
  <xsl:template name="class_toc">
    <xsl:param name="depth"/>
    <xsl:text>toc</xsl:text>
    <xsl:text> </xsl:text>
    <xsl:text>toc</xsl:text>
    <xsl:value-of select="$depth"/>
  </xsl:template>

  <xsl:template name="continuedToc">
    <xsl:if
      test="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
      <ul class="toc">
        <xsl:apply-templates mode="maketoc"
          select="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6"
        />
      </ul>
    </xsl:if>
  </xsl:template>

  <xsl:template match="tei:div" mode="maketoc">
    <xsl:param name="forcedepth"/>
    <xsl:variable name="myName">
      <xsl:value-of select="local-name(.)"/>
    </xsl:variable>
    <xsl:if test="tei:head or $autoHead='true'">
      <xsl:variable name="Depth">
        <xsl:choose>
          <xsl:when test="not($forcedepth='')">
            <xsl:value-of select="$forcedepth"/>
          </xsl:when>
          <xsl:otherwise>
            <xsl:value-of select="$tocDepth"/>
          </xsl:otherwise>
        </xsl:choose>
      </xsl:variable>
      <xsl:variable name="thislevel">
	<xsl:value-of select="count(ancestor::tei:div)"/>
      </xsl:variable>
      <xsl:variable name="pointer">
        <xsl:apply-templates mode="generateLink" select="."/>
      </xsl:variable>
      <li>
	<xsl:choose>
	<xsl:when test="not(ancestor::tei:div) and tei:div">
	  <xsl:attribute name="class">
	    <xsl:text>tocTree</xsl:text>
	  </xsl:attribute>
	  <a class="collapsed" 
	     title="Click here to expand list of sections in this chapter" 
	     href="#" onclick="toggleToc(this);return false;">&#160;</a>
	</xsl:when>
	<xsl:otherwise>
	  <xsl:attribute name="class">
	    <xsl:text>toc</xsl:text>
	  </xsl:attribute>
	  <a class="normaltoc">&#160;</a>
	</xsl:otherwise>
	</xsl:choose>
	<xsl:call-template name="header">
	  <xsl:with-param name="toc" select="$pointer"/>
	  <xsl:with-param name="minimal">false</xsl:with-param>
	  <xsl:with-param name="display">plain</xsl:with-param>
	</xsl:call-template>
	<xsl:if test="$thislevel &lt; $Depth">
	    <xsl:call-template name="continuedToc"/>
        </xsl:if>
      </li>
    </xsl:if>
  </xsl:template>

  <xsl:template name="mainTOC">
    <xsl:param name="force"/>

    <div class="toc_back">
      <h3>
      	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Back Matter</xsl:with-param>
	  </xsl:call-template>
      </h3>
      <xsl:for-each
	  select="ancestor-or-self::tei:TEI/tei:text/tei:back">
	<xsl:if
	    test="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
	  <ul class="toc{$force} toc_back">
	    <xsl:apply-templates mode="maketoc"
				 select="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
	      <xsl:with-param name="forcedepth" select="$force"/>
              </xsl:apply-templates>
	  </ul>
	</xsl:if>
      </xsl:for-each>
    </div>

    <div class="toc_front">
      <h3>
      	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Front Matter</xsl:with-param>
	  </xsl:call-template>
      </h3>
      <xsl:for-each
	  select="ancestor-or-self::tei:TEI/tei:text/tei:front">
	<xsl:if
	    test="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
	  <ul class="toc{$force} toc_front">
	    <xsl:apply-templates mode="maketoc"
				 select="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
	      <xsl:with-param name="forcedepth" select="$force"/>
	    </xsl:apply-templates>
            </ul>
	</xsl:if>
      </xsl:for-each>
    </div>

    <div class="toc_body">
      <h3>
      	  <xsl:call-template name="i18n">
	    <xsl:with-param name="word">Text body</xsl:with-param>
	  </xsl:call-template>
      </h3>
      <xsl:for-each
        select="ancestor-or-self::tei:TEI/tei:text/tei:body">
        <xsl:if
          test="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
          <ul class="toc{$force}  toc_body">
            <xsl:apply-templates mode="maketoc"
              select="tei:div|tei:div0|tei:div1|tei:div2|tei:div3|tei:div4|tei:div5|tei:div6">
              <xsl:with-param name="forcedepth" select="$force"/>
            </xsl:apply-templates>
          </ul>
        </xsl:if>
      </xsl:for-each>
    </div>

  </xsl:template>


  <xsl:template match="tei:divGen[@type='toc']"/>

  <xsl:template name="javascriptHook">
    <script type="text/javascript" src="udm-all.js">
       <xsl:comment>&#160;</xsl:comment>
    </script>
    <xsl:call-template name="jsForOdds"/>

  </xsl:template>

  <xsl:template name="sectionHeadHook">
    <xsl:variable name="ident">
      <xsl:apply-templates mode="ident" select="."/>
    </xsl:variable>
    <xsl:variable name="d">
      <xsl:apply-templates mode="depth" select="."/>
    </xsl:variable>
    <xsl:if test="$d &gt; 0">
    <span class="bookmarklink">
      <a class="bookmarklink" href="#{$ident}">
	<xsl:attribute name="title">
	  <xsl:text>link to this section </xsl:text>
	</xsl:attribute>
	<span class="invisible">
	  <xsl:text>TEI: </xsl:text>
	  <xsl:value-of select="tei:head[1]"/>
	</span>
	<xsl:text>&#x00B6;</xsl:text>
      </a>
    </span>
    </xsl:if>
  </xsl:template>

  <xsl:template match="/div"> </xsl:template>


  <xsl:template name="myi18n">
    <xsl:param name="word"/>
    <xsl:choose>
      <xsl:when test="$word='previousWord'">
        <span class="icon">
          <xsl:text>&#xab; </xsl:text>
        </span>
      </xsl:when>
      <xsl:when test="$word='upWord'">
        <span class="icon">
          <xsl:text>&#8593; </xsl:text>
        </span>
      </xsl:when>
      <xsl:when test="$word='nextWord'">
        <span class="icon">
          <xsl:text>&#xbb; </xsl:text>
        </span>
      </xsl:when>
    </xsl:choose>
  </xsl:template>

<!-- link from bibl back to egXML -->
<xsl:template match="tei:listBibl/tei:biblStruct|tei:listBibl/tei:bibl">
  <xsl:apply-templates/>
  <xsl:for-each select="key('BACKLINKS',@xml:id)">
    <xsl:if test="self::teix:egXML">
      <xsl:text> </xsl:text>
      <a class="link_return"
	 title="Go back to text">
	<xsl:attribute name="href">
	  <xsl:apply-templates select="." mode="generateLink"/>
	</xsl:attribute>
	<xsl:text>&#8629;</xsl:text>
      </a>
    </xsl:if>
  </xsl:for-each>
</xsl:template>

<xsl:template name="egXMLHook">
  <xsl:if test="@corresp and key('IDS',substring-after(@corresp,'#'))">
    <div style="float: right;">
	<a>
	  <xsl:attribute name="href">
	    <xsl:apply-templates mode="generateLink"
				 select="key('IDS',substring-after(@corresp,'#'))"/>
	  </xsl:attribute>
	  <xsl:text>bibliography</xsl:text>
<!--	  <span class="citLink">&#x270d;</span>-->
	</a>
    </div>
  </xsl:if>
</xsl:template>


<xsl:template name="figureHook">
  <xsl:if test="@corresp and key('IDS',substring-after(@corresp,'#'))">
    <div style="float: right;">
      <a>
	<xsl:attribute name="href">
	  <xsl:apply-templates mode="generateLink"
			       select="key('IDS',substring-after(@corresp,'#'))"/>
	</xsl:attribute>
	<xsl:text>bibliography</xsl:text>
      </a>
    </div>
  </xsl:if>
</xsl:template>


  <xsl:template name="stdfooter">
    <xsl:param name="style" select="'plain'"/>
    <xsl:variable name="date">
      <xsl:call-template name="generateDate"/>
    </xsl:variable>
    <xsl:variable name="author">
      <xsl:call-template name="generateAuthor"/>
    </xsl:variable>
    <div class="stdfooter">
    <p>
    [<a href="../../en/html/">English</a>]
    [<a href="../../de/html/">Deutsch</a>]
    [<a href="../../es/html/">Español</a>]
    [<a href="../../it/html/">Italiano</a>]
    [<a href="../../fr/html/">Français</a>]
    [<a href="../../ja/html/">日本語</a>]
    [<a href="../../zh-tw/html/">中文</a>]
    </p>
      <hr/>
      <xsl:if test="$linkPanel='true'">
        <div class="footer">
          <xsl:if test="not($parentURL='')"><a class="{$style}"
              href="{$parentURL}">
              <xsl:value-of select="$parentWords"/>
            </a>  </xsl:if>
          <xsl:if test="$searchURL"> | <a class="{$style}" href="{$searchURL}"
              target="_top">
              <xsl:call-template name="searchWords"/>
            </a>
          </xsl:if>
          <xsl:if test="$feedbackURL"> | <a class="{$style}" href="{$feedbackURL}">
              <xsl:call-template name="feedbackWords"/>
            </a>
          </xsl:if>
        </div>
        <hr/>
      </xsl:if>
      <address>
        <xsl:call-template name="copyrightStatement"/>
        <xsl:text> </xsl:text>
        <a href="COPYING.txt">Licensed under the GPL.</a>
        <xsl:text> Copying and redistribution is permitted and encouraged. </xsl:text>
	<br/>
        <xsl:text>Version </xsl:text>
        <xsl:value-of 
select="ancestor-or-self::tei:TEI/tei:teiHeader/tei:fileDesc/tei:editionStmt/tei:edition"/>
        <xsl:text>This page generated on </xsl:text> 
	<xsl:call-template name="whatsTheDate"/>

    </address>
    </div>
    <xsl:if test="not($googleAnalytics='')">
      <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"><!-- comment --></script>
      <script type="text/javascript">
	<xsl:text>_uacct = "</xsl:text>
	<xsl:value-of select="$googleAnalytics"/>
	<xsl:text>";
	urchinTracker();
	</xsl:text>
      </script>
      </xsl:if>
  </xsl:template>

<xsl:template name="teiTOP">
  <xsl:param name="name"/>
  
  <script type="text/javascript" src="udm-dom.js">
    <xsl:comment>&#160;</xsl:comment>
  </script>
  <script type="text/javascript" src="udm-mod-keyboard.js">
    <xsl:comment>&#160;</xsl:comment>
  </script>
  
  <div id="container">
    <a href="#contentstart" 
       title="Skip to content" 
       class="skip">skip to content</a>
    <div id="banner">
      <img src="Images/banner.jpg"
	   alt="Text Encoding Initiative logo and banner"/>
    </div>
    
    <xsl:copy-of select="document('staticnav.xml')/html:ul"/>
  </div>
  <div
      class="mainhead">
    <h1>P5: 
    <xsl:call-template name="i18n">
      <xsl:with-param name="word">GuidelinesTEI</xsl:with-param>
    </xsl:call-template>
    </h1>
  </div>
</xsl:template>

<heads xmlns="http://www.tei-c.org/ns/1.0">
<head xml:lang="fr" corresp="AB">À propos des Principes directeurs</head>
<head xml:lang="fr" corresp="AI">Mécanismes analytiques simples</head>
<head xml:lang="fr" corresp="BIB">Bibliographie</head>
<head xml:lang="fr" corresp="CC">Corpus linguistiques</head>
<head xml:lang="fr" corresp="CE">Degré de certitude et responsabilité</head>
<head xml:lang="fr" corresp="CH">Langues et jeux de caractères </head>
<head xml:lang="fr" corresp="CO">Éléments disponibles pour tous les documents TEI</head>
<head xml:lang="fr" corresp="COL">Colophon</head>
<head xml:lang="fr" corresp="dedication">Dédicace</head>
<head xml:lang="fr" corresp="DI">Dictionnaires</head>
<head xml:lang="fr" corresp="DR">Théâtre</head>
<head xml:lang="fr" corresp="DS">Structure textuelle par défaut</head>
<head xml:lang="fr" corresp="FS">Structures de traits</head>
<head xml:lang="fr" corresp="FT">Tableaux, formules et graphiques</head>
<head xml:lang="fr" corresp="GD">Graphes, réseaux et arbres</head>
<head xml:lang="fr" corresp="HD">En-tête TEI</head>
<head xml:lang="fr" corresp="MS">Description de manuscrits</head>
<head xml:lang="fr" corresp="ND">Noms, dates, personnes et lieux</head>
<head xml:lang="fr" corresp="NH">Structures non hiérarchiques</head>
<head xml:lang="fr" corresp="PH">Représentation de sources primaires</head>
<head xml:lang="fr" corresp="PREF">Préface et remerciements</head>
<head xml:lang="fr" corresp="PREFS">Notes préliminaires </head>
<head xml:lang="fr" corresp="REF-CLASSES-ATTS">Classes attributives</head>
<head xml:lang="fr" corresp="REF-CLASSES-MODEL">Classes structurales</head>
<head xml:lang="fr" corresp="REF-ELEMENTS">Éléments</head>
<head xml:lang="fr" corresp="REF-MACROS">Types de données et autres macros </head>
<head xml:lang="fr" corresp="SA">Liens, segmentation et alignement</head>
<head xml:lang="fr" corresp="SG">Petite introduction à XML</head>
<head xml:lang="fr" corresp="ST">Infrastructure de la TEI</head>
<head xml:lang="fr" corresp="TC">Apparat critique</head>
<head xml:lang="fr" corresp="TD">Éléments de déclaration d’un modèle</head>
<head xml:lang="fr" corresp="TitlePageVerso">Versions des Principes directeurs</head>
<head xml:lang="fr" corresp="TS">Transcriptions de la parole</head>
<head xml:lang="fr" corresp="USE">Utiliser la TEI</head>
<head xml:lang="fr" corresp="VE">Poésie</head>
<head xml:lang="fr" corresp="WD">Représentation des caractères et des
glyphes non standard</head>
  <head xml:lang="zh-tw" corresp="AI">簡易分析機制</head>
  <head xml:lang="zh-tw" corresp="CE">確定程度與不確定程度</head>
  <head xml:lang="zh-tw" corresp="CO">所有TEI文件所通用的元素</head>
  <head xml:lang="zh-tw" corresp="CC">文集文本</head>
  <head xml:lang="zh-tw" corresp="DI">紙本字典</head>
  <head xml:lang="zh-tw" corresp="DR">劇本</head>
  <head xml:lang="zh-tw" corresp="FT">表格、方程式與圖表</head>
  <head xml:lang="zh-tw" corresp="WD">文字與字體說明</head>
  <head xml:lang="zh-tw" corresp="HD">TEI標頭</head>
  <head xml:lang="zh-tw" corresp="FS">功能結構 (Feature Structures)</head>
  <head xml:lang="zh-tw" corresp="SA">Linking, segmentation and alignment連結、分割與隊列</head>
  <head xml:lang="zh-tw" corresp="MS">寫本描述</head>
  <head xml:lang="zh-tw" corresp="ND">名稱與日期</head>
  <head xml:lang="zh-tw" corresp="GD">圖形、網絡與樹狀結構</head>
  <head xml:lang="zh-tw" corresp="TS">轉錄的言詞</head>
  <head xml:lang="zh-tw" corresp="TD">TEI模組說明</head>
  <head xml:lang="zh-tw" corresp="ST">所有TEI模組可用的元素集、資料類型、巨集指令之宣告</head>
  <head xml:lang="zh-tw" corresp="TC">學術編輯註解</head>
  <head xml:lang="zh-tw" corresp="DS">預設文件結構</head>
  <head xml:lang="zh-tw" corresp="PH">原文轉錄</head>
  <head xml:lang="zh-tw" corresp="VE">韻文結構</head>
  <head xml:lang="zh-tw" corresp="dedication">獻辭</head>	
  <head xml:lang="zh-tw" corresp="PREF">序言與致謝</head>
  <head xml:lang="zh-tw" corresp="PREFS">序文的言辭</head>
  <head xml:lang="zh-tw" corresp="REF-CLASSES-ATTS">屬性集</head>
  <head xml:lang="zh-tw" corresp="REF-CLASSES-MODEL">元素集</head>
  <head xml:lang="zh-tw" corresp="REF-ELEMENTS">元素</head>
  <head xml:lang="zh-tw" corresp="REF-MACROS">資料類型與其他巨集指令</head>
  <head xml:lang="zh-tw" corresp="USE">使用TEI</head>
  <head xml:lang="zh-tw" corresp="SG">XML入門</head>
  <head xml:lang="zh-tw" corresp="AB">關於</head>

  <head xml:lang="it" corresp="USE">Come usare TEI</head>
  <head xml:lang="it" corresp="SG">Una graduale introduzione a XML</head>
  <head xml:lang="it" corresp="AB">Le presenti Linee Guida</head> 
  <head xml:lang="it" corresp="AI">Semplici meccanismi di analisi</head>
  <head xml:lang="it" corresp="CE">Certezza e incertezza</head>
  <head xml:lang="it" corresp="CO">Elementi comuni a tutti i documenti TEI</head>
  <head xml:lang="it" corresp="CC">Corpus di testi</head>
  <head xml:lang="it" corresp="DI">Dizionari a stampa</head>
  <head xml:lang="it" corresp="DR">Testi per performance</head>
  <head xml:lang="it" corresp="FT">Tabelle, formule e figure</head>
  <head xml:lang="it" corresp="WD">Documentazione di caratteri non standard e glifi</head>
  <head xml:lang="it" corresp="HD">L'intestazione TEI (TEI Header)</head>
  <head xml:lang="it" corresp="FS">Strutture di configurazione (feature structures)</head>
  <head xml:lang="it" corresp="SA">Collegamento, segmentazione e allineamento</head>
  <head xml:lang="it" corresp="MS">Descrizione di manoscritti</head>
  <head xml:lang="it" corresp="ND">Nomi e date</head>
  <head xml:lang="it" corresp="GD">Grafici, reti e alberi</head>
  <head xml:lang="it" corresp="TS">Trascrizione del parlato</head>
  <head xml:lang="it" corresp="TD">Documentazione dei moduli TEI</head>
  <head xml:lang="it" corresp="ST">Dichiarazione di classi, tipi di dati e macro
</head>
  <head xml:lang="it" corresp="TC">Apparato critico</head>
  <head xml:lang="it" corresp="DS">Struttura standard del testo</head>
  <head xml:lang="it" corresp="PH">Trascrizione di fonti primarie</head>
  <head xml:lang="it" corresp="VE">Strutture poetiche</head>

  <head xml:lang="it" corresp="COL">Colofone</head>
  <head xml:lang="it" corresp="dedication">Dedica</head>
  <head xml:lang="it" corresp="PREF">Prefazione e ringraziamenti</head>
  <head xml:lang="it" corresp="PREFS">Note introduttive</head>
  <head xml:lang="it" corresp="REF-CLASSES-ATTS">Classi di attributi</head>
  <head xml:lang="it" corresp="REF-CLASSES-MODEL">Classi di modelli</head>
  <head xml:lang="it" corresp="REF-ELEMENTS">Elementi</head>
  <head xml:lang="it" corresp="REF-MACROS">Datatype e altre macro</head>


  <head xml:lang="pt" corresp="AI">Mecanismos simples de análise</head> 
  <head xml:lang="pt" corresp="CE">Certeza e incerteza</head> 
  <head xml:lang="pt" corresp="CO">Elementos comuns a todos os documentos TEI</head> 
  <head xml:lang="pt" corresp="CC">Textos do corpora</head> 
  <head xml:lang="pt" corresp="DI">Dicionários impressos</head> 
  <head xml:lang="pt" corresp="DR">Textos de actuação</head> 
  <head xml:lang="pt" corresp="FT">Tabelas, fórmulas, e figuras</head> 
  <head xml:lang="pt" corresp="WD">Documentação dos carateres</head> 
  <head xml:lang="pt" corresp="HD">O cabeçalho TEI</head> 
  <head xml:lang="pt" corresp="FS">Estrutura das características</head> 
  <head xml:lang="pt" corresp="SA">Ligação, segmentação e alinhamento</head> 
  <head xml:lang="pt" corresp="MS">Descrição do manuscrito</head> 
  <head xml:lang="pt" corresp="ND">Nomes e datas</head> 
  <head xml:lang="pt" corresp="GD">Grafos, redes, e árvores</head> 
  <head xml:lang="pt" corresp="TS">Transcrição do discurso</head> 
  <head xml:lang="pt" corresp="TD">Documentação dos módulos TEI</head> 
  <head xml:lang="pt" corresp="ST">Declaraçoes de classes, tipos de dados, e macros disponíveis em todos os módulos  TEI </head> 
  <head xml:lang="pt" corresp="TC">Critical Apparatus</head> 
  <head xml:lang="pt" corresp="DS">Estrutura do texto por defeito</head> 
  <head xml:lang="pt" corresp="PH">Transcrição de fontes primárias</head> 
  <head xml:lang="pt" corresp="VE">Estrutura dos versos</head> 
  <head xml:lang="pt" corresp="COL">Colophon</head> 
  <head xml:lang="pt" corresp="dedication">Dedicação</head> 
  <head xml:lang="pt" corresp="PREF">Prefácio e agradecimentos</head> 
  <head xml:lang="pt" corresp="PREFS">Notas de prefácio</head>
  <head xml:lang="pt" corresp="REF-CLASSES-ATTS">Classes dos atributos</head> 
  <head xml:lang="pt" corresp="REF-CLASSES-MODEL">Classes do modelo</head> 
  <head xml:lang="pt" corresp="REF-ELEMENTS">Elementos</head> 
  <head xml:lang="pt" corresp="REF-MACROS">Tipos de dados e outras macros</head> 

<!-- keywords on the interface for Module --> 
  <head xml:lang="ja" corresp="AI">分析モジュール</head>
  <head xml:lang="ja" corresp="CE">確信度モジュール</head>
  <head xml:lang="ja" corresp="CO">コアモジュール</head>
  <head xml:lang="ja" corresp="CC">コーパスモジュール</head>
  <head xml:lang="ja" corresp="DI">辞書モジュール</head>
  <head xml:lang="ja" corresp="DR">舞台芸術モジュール</head>
  <head xml:lang="ja" corresp="FT">図表式モジュール</head>
  <head xml:lang="ja" corresp="WD">外字モジュール</head>
  <head xml:lang="ja" corresp="HD">ヘダーモジュール</head>
  <head xml:lang="ja" corresp="FS">素性構造モジュール</head>
  <head xml:lang="ja" corresp="SA">リンクモジュール</head>
  <head xml:lang="ja" corresp="MS">手書きモジュール</head>
  <head xml:lang="ja" corresp="ND">名前モジュール</head>
  <head xml:lang="ja" corresp="GD">グラフモジュール</head>
  <head xml:lang="ja" corresp="TS">発話モジュール</head>
  <head xml:lang="ja" corresp="TD">タグ定義モジュール</head>
  <head xml:lang="ja" corresp="TC">校勘モジュール</head>
  <head xml:lang="ja" corresp="DS">テキスト構造モジュール</head>
  <head xml:lang="ja" corresp="PH">転記モジュール</head>
  <head xml:lang="ja" corresp="VE">韻文モジュール</head>

<!-- keywords on the interface for toc --> 
  <head xml:lang="ja" corresp="COL">コロフォン</head>
  <head xml:lang="ja" corresp="dedication">献辞</head>
  <head xml:lang="ja" corresp="PREF">序文と謝辞</head>
  <head xml:lang="ja" corresp="PREFS">序文集</head>
  <head xml:lang="ja" corresp="REF-CLASSES-ATTS">属性クラス</head>
  <head xml:lang="ja" corresp="REF-CLASSES-MODEL">モデルクラス</head>
  <head xml:lang="ja" corresp="REF-ELEMENTS">要素</head>

<!-- keywords on the interface for app.D --> 
  <head xml:lang="ja" corresp="REF-MACROS">データ型とマクロ</head>
  <head xml:lang="ja" corresp="ST">TEIの基礎構造</head>
  <head xml:lang="ja" corresp="AB">本ガイドラインについて</head>
  <head xml:lang="ja" corresp="SG">XML入門</head>
  <head xml:lang="ja" corresp="USE">TEIの使い方</head>


<head xml:lang="es" corresp="AI">Mecanismos analíticos simples</head>
<head xml:lang="es" corresp="CE">Certeza e incertidumbre</head>
<head xml:lang="es" corresp="CO">Elementos comunes a todos los documentos TEI</head>
<head xml:lang="es" corresp="CC">Textos de corpus</head>
<head xml:lang="es" corresp="DI">Diccionarios impresos</head>
<head xml:lang="es" corresp="DR">Textos teatrales</head>
<head xml:lang="es" corresp="FT">Tablas, fórmulas y figuras</head>
<head xml:lang="es" corresp="WD">Documentación de caracteres y glifos</head>
<head xml:lang="es" corresp="HD">La cabecera TEI</head>
<head xml:lang="es" corresp="FS">Estructuras de rasgos</head>
<head xml:lang="es" corresp="SA">Enlace, segmentación y alineación</head>
<head xml:lang="es" corresp="MS">Descripción de manuscritos</head>
<head xml:lang="es" corresp="ND">Nombres y fechas</head>
<head xml:lang="es" corresp="GD">Grafos, redes y árboles</head>
<head xml:lang="es" corresp="TS">Habla transcrita</head>
<head xml:lang="es" corresp="TD">Documentación de los módulos de TEI</head>
<head xml:lang="es" corresp="ST">Declaraciones de clases, tipos de datos y macros disponibles para todos los módulos TEI</head>
<head xml:lang="es" corresp="TC">Aparato crítico</head>
<head xml:lang="es" corresp="DS">Estructura textual por defecto</head>
<head xml:lang="es" corresp="PH">Transcripción de fuentes primarias</head>
<head xml:lang="es" corresp="VE">Estructuras de versos</head>
<head xml:lang="es" corresp="AB">Sobre estas directrices</head>
<head xml:lang="es" corresp="REF-CLASSES-ATTS">Clases de atributos</head>
<head xml:lang="es" corresp="REF-CLASSES-MODEL">Clases de modelos</head>
<head xml:lang="es" corresp="REF-ELEMENTS">Elementos</head>
<head xml:lang="es" corresp="SG">Una introducción suave a XML</head>
<head xml:lang="es" corresp="USE">Cómo usar TEI</head>

<!-- Catalan -->

<head xml:lang="ca" corresp="AI">Mecanismes analítics simples</head>
<head xml:lang="ca" corresp="CE">Certitud i incertitud</head>
<head xml:lang="ca" corresp="CO">Elements comuns a tots els documents TEI</head>
<head xml:lang="ca" corresp="CC">Textos de corpus</head>
<head xml:lang="ca" corresp="DI">Diccionaris impresos</head>
<head xml:lang="ca" corresp="DR">Textos teatrals</head>
<head xml:lang="ca" corresp="FT">Taules, fórmules i figures</head>
<head xml:lang="ca" corresp="WD">Documentació de caràcters i glifs</head>
<head xml:lang="ca" corresp="HD">L'encapçalament TEI</head>
<head xml:lang="ca" corresp="FS">Estructures de trets</head>
<head xml:lang="ca" corresp="SA">Enllaç, segmentació i alineació</head>
<head xml:lang="ca" corresp="MS">Descripció de manuscrits</head>
<head xml:lang="ca" corresp="ND">Noms i dates</head>
<head xml:lang="ca" corresp="GD">Grafs, xarxes i arbres</head>
<head xml:lang="ca" corresp="TS">Parla transcrita</head>
<head xml:lang="ca" corresp="TD">Documentació dels mòduls de TEI</head>
<head xml:lang="ca" corresp="ST">Declaracions de classes, tipus de dades i macros disponibles per a tots els mòduls TEI</head>
<head xml:lang="ca" corresp="TC">Aparat crític</head>
<head xml:lang="ca" corresp="DS">Estructura textual per defecte</head>
<head xml:lang="ca" corresp="PH">Transcripció de fonts primàries</head>
<head xml:lang="ca" corresp="VE">Estructures de versos</head>
<head xml:lang="ca" corresp="AB">Sobre aquestes directrius</head>
<head xml:lang="ca" corresp="REF-CLASSES-ATTS">Classes d'atributs</head>
<head xml:lang="ca" corresp="REF-CLASSES-MODEL">Classes de models</head>
<head xml:lang="ca" corresp="REF-ELEMENTS">Elements</head>
<head xml:lang="ca" corresp="SG">Una introducció suau a XML</head>
<head xml:lang="ca" corresp="USE">Com usar TEI</head>

<!-- German -->
  <head xml:lang="de" corresp="AI">Einfache Analyse-Mechanismen</head>
  <head xml:lang="de" corresp="CE">Zuverl&#xE4;ssigkeit und Unsicherheit</head>
  <head xml:lang="de" corresp="CO">Elemente, verf&#xfc;gbar in allen TEI-Dokumenten</head>
  <head xml:lang="de" corresp="CC">Korpustexte</head>
  <head xml:lang="de" corresp="DI">Gedruckte W&#xF6;rterb&#xFC;cher</head>
  <head xml:lang="de" corresp="DR">Zur Auff&#xfc;hrung bestimmte Texte</head>
  <head xml:lang="de" corresp="FT">Tabellen, Formeln und Abbildungen</head>
  <head xml:lang="de" corresp="WD">Dokumentation von Zeichen und Glyphen</head>
  <head xml:lang="de" corresp="HD">Der TEI-Header</head>
  <head xml:lang="de" corresp="FS">Merkmalsstrukturen</head>
  <head xml:lang="de" corresp="SA">Verlinken, Segmentieren und Parallelisieren</head>
  <head xml:lang="de" corresp="MS">Handschriftenbeschreibung</head>
  <head xml:lang="de" corresp="ND">Namen und Datumsangaben</head>
  <head xml:lang="de" corresp="GD">Graphen, Netze und B&#xE4;ume</head>
  <head xml:lang="de" corresp="TS">Transkription gesprochener Sprache</head>
  <head xml:lang="de" corresp="TD">Dokumentation zu den TEI-Modulen</head>
  <head xml:lang="de" corresp="ST">Deklaration zu Klassen, Datentypen und Makros, verf&#xfc;gbar in allen TEI-Modulen</head>
  <head xml:lang="de" corresp="TC">Kritische Apparate</head>
  <head xml:lang="de" corresp="DS">Standard-Textstruktur</head>
  <head xml:lang="de" corresp="PH">Transkription von Prim&#xE4;rquellen</head>
  <head xml:lang="de" corresp="VE">Vers-Strukturen</head>



</heads>


</xsl:stylesheet>
